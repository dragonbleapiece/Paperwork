{"version":3,"sources":["Icons/info.svg","Icons/next.svg","Icons/arrow_leftUI.svg","Icons/unknown.svg","Icons/cancel.svg","Icons/minimize.svg","Icons/save_alt.svg","Icons/burst_mode.svg","Icons/arrow_upUI.svg","Icons/arrow_downUI.svg","Icons/scale.svg","Icons/rotate_left.svg","Icons/move.svg","Icons/full_square.svg","Icons/full_triangle.svg","Icons/full_ellipse.svg","Icons/HHatching.svg","Icons/VHatching.svg","Icons/LOHatching.svg","Icons/ROHatching.svg","Icons/grid_on.svg","Icons/markov.svg","Icons/void.svg","Icons/arrow_right.svg","Icons/zero.svg","Icons/one.svg","Icons/filter.svg","Icons/filter_none.svg","Icons/my_location.svg","Icons/dice.svg","Icons/increment.svg","Icons/decrement.svg","Icons/repeat.svg","Icons/sync_alt.svg","Icons/trending_flat.svg","Icons/arrow_rightUI.svg","Components/Canvas/Canvas.js","Components/ContextMenuBox/ContextMenuBox.js","Components/Colors/Color.js","DragManager.js","Components/Box/Box.js","Components/BoxGroup/BoxGroup.js","Components/Colors/Black.js","Components/Workspace/Workspace.js","Components/Save/Save.js","Components/Input/Input.js","Components/Input/SliderBox/SliderBox.js","Components/Transforms/Transform.js","Components/Transforms/Transform2D.js","Components/Figures/Figure.js","Components/Figures/Rectangle/Rectangle.js","Components/Figures/Triangle/Triangle.js","Components/Figures/Ellipse/Ellipse.js","Components/Figures/Hatching/Hatching.js","Components/Figures/Hatching/HHatching/HHatching.js","Components/Figures/Hatching/VHatching/VHatching.js","Components/Figures/Hatching/LOHatching/LOHatching.js","Components/Figures/Hatching/ROHatching/ROHatching.js","Components/Colors/White.js","Components/Placement/Placement.js","Components/InBox/InBox.js","Components/Series/Series.js","Components/Modes/Mode.js","Components/Modes/GridMode/GridMode.js","Components/Modes/GridMode/LinearX/LinearX.js","Components/Placement/Grid/Grid.js","Components/Markov/DraggableCursor.js","Components/Markov/Radar.js","Components/Markov/Markov.js","Components/Void/Void.js","Components/Colors/Red.js","Components/Colors/Orange.js","Components/Colors/Yellow.js","Components/Colors/Green.js","Components/Colors/LightBlue.js","Components/Colors/Blue.js","Components/Figures/Symbols/Symbol.js","Components/Figures/Symbols/Arrow/Arrow.js","Components/Figures/Characters/Character.js","Components/Figures/Characters/Number0.js","Components/Figures/Characters/Number1.js","Components/Log/Log.js","Components/Recursion/Recursion.js","Components/Figures/ThisBox/ThisBox.js","Utils.js","Components/Input/Random/Random.js","Components/Input/Increment/Increment.js","Components/Modes/GridMode/LinearY/LinearY.js","Components/Modes/GridMode/DiagonalLeft/DiagonalLeft.js","Components/Modes/GridMode/DiagonalRight/DiagonalRight.js","Components/Modes/GridMode/Orthogonal/Orthogonal.js","Components/Modes/GridMode/SnailRight/SnailRight.js","Components/Index.js","Containers/App/App.js","serviceWorker.js","index.js"],"names":["module","exports","DEFAULTSTYLE","fillColor","Paper","Color","strokeColor","strokeWidth","transform","Matrix","Canvas","props","undefined","_instance","state","function","width","height","currentFont","observers","reset","svg","getImageData","callback","mimeType","qualityArgument","toBlob","draw","obj","attach","detach","this","_styles","slice","last","length","filename","ext","extension","canvasWidth","window","innerWidth","canvasHeight","innerHeight","CanvasSize","setState","canvas","document","getElementById","_PaperScope","setup","view","onResize","e","windowResized","componentDidUpdate","addEventListener","autoUpdate","updateWorkspace","color","lastStyle","x","y","rect","Path","Rectangle","Point","Size","setPathStyle","ellipse","Ellipse","point","size","x1","y1","x2","y2","line","Line","triangle","RegularPolygon","matrix","appended","translate","cx","cy","scale","angle","rotate","strokeWeight","weight","text","textObject","PointText","fontFamily","content","justification","Group","segments","path","style","transformMatrixValue","r","g","b","a","f","sk","CalcCanvasSize","resizeCanvas","project","clear","init","notifyAll","push","filter","observer","forEach","receiveNotification","exportSVG","asString","matchShapes","bounds","element","toDataURL","replace","className","id","resize","scaling","translation","rotation","reduce","acc","Component","ContextMenuBox","m","handleClick","map","item","index","icon","getIconClassFromName","type","elements","onClick","data","key","shortid","generate","src","name","title","arrow_right","getMenu","menuItems","menu","suppMenu","concat","holdToDisplay","children","_draggable","_droppables","_draggableIndex","DragManager","clearDroppable","droppableKey","box","target","node","ReactDOM","findDOMNode","refs","previousElementSibling","parent","menuColor","unauthorized","Box","dragEnter","isMinimized","isInfo","transforms","initStateFromSavedState","initState","parentsList","constructor","ref","drawBeforeType","reloadMenu","doBeforeAddChild","isFlexVertical","lastEnter","contentRect","hasInfo","canMinimize","_id","checkChildrenFromSavedState","indexOf","filteredMenu","hasParent","filterUnauthorized","event","addClassToElement","exceptions","Function","child","i","exception","getClassFromName","functionToCall","object","cl","getFunctionClass","isAuthorized","setChildren","beforeAddChild","pushChild","doBeforeSetChildren","el","elmnt","next","nextType","callDrawBeforeType","saveState","splice","getBoxPlaceHolder","boxToJSON","json","toJSON","dataTransfer","setData","JSON","stringify","effectAllowed","instance","draggable","dropEffect","removeFromParent","clearData","types","preventDefault","getDragItemIndex","screenX","screenY","addDroppable","stopPropagation","onDragEnter","parse","getData","insertChild","container","dragManager","Array","from","nodeType","getBoundingClientRect","isx","left","isy","top","draggableParent","draggableIndex","c","isNotBlack","formatedColor","formatedTextColor","formatedBackgroundColor","getChildren","getTransforms","renderBox","infoBox","getInfo","doBeforeRender","getColorMenu","onInfo","bind","info","onMinimize","minimize","onClose","cancel","onDragStart","onDragEnd","onDrag","fill","backgroundColor","minHeight","maxWidth","onDrop","onDragOver","onDragLeave","stateToJSON","BoxGroup","drawBeforeChild","pop","React","Children","Black","menuRefresh","Workspace","startDrag","addDrawBeforeType","addChild","forceUpdate","getColor","sendDraw","img","createElement","setDragImage","movX","movY","scrollLeft","scrollTop","getInstructions","Save","DownloadName","DownloadNameSaved","DownloadSuffixNumber","jpg","DownloadSuffix","DownloadFormat","zipNumber","downloadImage","nb","dname","blob","Blob","saveAs","console","log","downloadZip","zip","JSZip","file","folder","isSVG","imageData","btoa","base64","self","generateAsync","then","checkZipNumber","value","parseInt","incrementZipNumber","decrementZipNumber","burst_mode","onChange","onBlur","arrow_up","arrow_down","defaultChecked","checked","htmlFor","icon_save_alt","Input","input","initFromSavedState","SliderBox","defaultValue","min","max","marks","step","padding","trackStyle","borderRadius","railStyle","handleStyle","marginTop","borderColor","dotStyle","bottom","onAfterChange","inputMenu","Transform","inputElement","returns","saveTransform","getValue","linkMenuTypes","unlinkMenuTypes","Transform2D","inputElements","linkMenu","solo","menuX","inputX","menuY","inputY","unlinkMenu","Figure","_x","_y","_rotation","_height","_width","_scale","getInputValue","0","1","moveIcon","0.1","1.5","scaleIcon","90","180","270","360","rotateIcon","position","drawFigure","square","setPathTransform","Triangle","Hatching","_density","2","11","20","stroke","noStroke","HHatching","HHatchingIcon","density","gapY","group","j","VHatching","VHatchingIcon","gapX","LOHatching","LOHatchingIcon","ROHatching","ROHatchingIcon","White","Placement","mode","currentMode","superJSON","InBox","Wrapper","authorizedChildren","Child","boxChildren","find","wrapper","Series","currentState","Mode","modes","GridMode","LinearX","rows","columns","lines","column","row","Recursion","Grid","grid_on","elem","30","renderMode","DraggableCursor","isDragging","ratio","onMouseMoveHandler","onMouseMove","onMouseUpHandler","onMouseUp","movement","button","removeEventListener","vector","radius","minRadius","maxRadius","scalar","movementX","movementY","Math","abs","sign","floor","newRadius","onMouseDown","getCirclePoint","center","elNumber","cos","PI","sin","getCirclePoints","points","Radar","probas","WIDTH","HEIGHT","pins","outerPoints","d","outerD","cursor","vertex","normalize","landmarks","version","xmlns","viewBox","Markov","random","idElement","markovIcon","proba","initProba","CENT","_","result","newProba","rand","probaIndex","remaining","p","clamp_left","clamp_right","radar","header","inputs","iconSelected","intValue","Number","isInteger","checkProba","getProbas","unknown","Void","voidIcon","Red","Orange","Yellow","Green","LightBlue","Blue","Symbol","Arrow","headLength","tailLength","headAngle","tailAngle","end","start","arrowHead","subtract","arrowTail","p3","p2","add","p4","p1","p5","closed","Character","fontSize","Number0","zero","Number1","one","Log","String","toString","globalRecursion","recursion","nbThisBox","ignoreThisBox","recursionMax","recursionOption","ThisBox","recursionParent","thisIcon","getRecursionDraw","fix","exactMath","mul","round","div","parseFloat","Random","to","Utils","sub","arrowLeft","arrowRight","inputOptionsIcons","limited","looped","loopedInverse","Increment","increment","condition","decrement","actualValue","incrementIcon","InputOptions","selected","onChangeOption","visibility","LinearY","DiagonalLeft","compteur","DiagonalRight","Orthogonal","SnailRight","side","move","toLowerCase","unauthorizedClass","error","toggle","App","aboutClick","handleOutsideClick","aboutContainer","contains","aboutButton","display","href","rel","icon_info","Boolean","location","hostname","match","configure","adapter","Adapter","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c94fa41d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/info.b08ccdbe.svg\";","module.exports = __webpack_public_path__ + \"static/media/next.0f510805.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_leftUI.1fd757d4.svg\";","module.exports = __webpack_public_path__ + \"static/media/unknown.3f5bae44.svg\";","module.exports = __webpack_public_path__ + \"static/media/cancel.4afab8b8.svg\";","module.exports = __webpack_public_path__ + \"static/media/minimize.fef1891a.svg\";","module.exports = __webpack_public_path__ + \"static/media/save_alt.3ccde972.svg\";","module.exports = __webpack_public_path__ + \"static/media/burst_mode.38a76e4c.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_upUI.d8be3f88.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_downUI.f06acfc6.svg\";","module.exports = __webpack_public_path__ + \"static/media/scale.08ae3836.svg\";","module.exports = __webpack_public_path__ + \"static/media/rotate_left.8e50c66d.svg\";","module.exports = __webpack_public_path__ + \"static/media/move.a4f49321.svg\";","module.exports = __webpack_public_path__ + \"static/media/full_square.c61ab8ee.svg\";","module.exports = __webpack_public_path__ + \"static/media/full_triangle.288a2239.svg\";","module.exports = __webpack_public_path__ + \"static/media/full_ellipse.61cb41c4.svg\";","module.exports = __webpack_public_path__ + \"static/media/HHatching.f3da2da9.svg\";","module.exports = __webpack_public_path__ + \"static/media/VHatching.c8766020.svg\";","module.exports = __webpack_public_path__ + \"static/media/LOHatching.186b393d.svg\";","module.exports = __webpack_public_path__ + \"static/media/ROHatching.8c0092fd.svg\";","module.exports = __webpack_public_path__ + \"static/media/grid_on.8ace643b.svg\";","module.exports = __webpack_public_path__ + \"static/media/markov.fd9fdcc8.svg\";","module.exports = __webpack_public_path__ + \"static/media/void.a2a55d7b.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_right.992a373b.svg\";","module.exports = __webpack_public_path__ + \"static/media/zero.691bc513.svg\";","module.exports = __webpack_public_path__ + \"static/media/one.73ed8e62.svg\";","module.exports = __webpack_public_path__ + \"static/media/filter.a3d9c337.svg\";","module.exports = __webpack_public_path__ + \"static/media/filter_none.c08263ce.svg\";","module.exports = __webpack_public_path__ + \"static/media/my_location.0347ed20.svg\";","module.exports = __webpack_public_path__ + \"static/media/dice.102c7491.svg\";","module.exports = __webpack_public_path__ + \"static/media/increment.7577ef8f.svg\";","module.exports = __webpack_public_path__ + \"static/media/decrement.e85eef12.svg\";","module.exports = __webpack_public_path__ + \"static/media/repeat.2f92b96d.svg\";","module.exports = __webpack_public_path__ + \"static/media/sync_alt.5937dafc.svg\";","module.exports = __webpack_public_path__ + \"static/media/trending_flat.aaf3d874.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow_rightUI.79443cdd.svg\";","import React, { Component } from 'react';\r\nimport './Canvas.css';\r\nimport PropTypes from 'prop-types';\r\nimport Paper from 'paper';\r\n\r\nconst DEFAULTSTYLE = {\r\n  fillColor: new Paper.Color(0, 0, 0, 1),\r\n  strokeColor: new Paper.Color(0, 0, 0, 1),\r\n  strokeWidth: 0,\r\n  transform: new Paper.Matrix()\r\n}\r\n\r\nclass Canvas extends Component {\r\n\r\n  /*Singleton*/\r\n  static _instance;\r\n  static _PaperScope;\r\n\r\n  static getImageData(svg = false) {\r\n    if(Canvas._instance !== undefined) {\r\n      return Canvas._instance.getImageData(svg);\r\n    }\r\n  }\r\n\r\n  static toBlob(callback, mimeType = 'image/png', qualityArgument = 0.80) {\r\n    if(Canvas._instance !== undefined) {\r\n      return Canvas._instance.toBlob(callback, mimeType, qualityArgument);\r\n    }\r\n  }\r\n\r\n  static draw() {\r\n    if(Canvas._instance !== undefined) {\r\n      Canvas._instance.draw();\r\n    }\r\n  }\r\n\r\n  static attach(obj) {\r\n    if(Canvas._instance !== undefined) {\r\n      Canvas._instance.attach(obj);\r\n    }\r\n  }\r\n\r\n  static detach(obj) {\r\n    if(Canvas._instance !== undefined) {\r\n      Canvas._instance.detach(obj);\r\n    }\r\n  }\r\n\r\n  state = {\r\n    function: undefined,\r\n    width: 0,\r\n    height: 0\r\n  };\r\n\r\n  constructor(props) {\r\n    if(Canvas._instance !== undefined) {\r\n      return Canvas._instance;\r\n    }\r\n    super(props);\r\n    this.currentFont = null;\r\n    this.observers = [];\r\n    this.reset();\r\n\r\n    Canvas._instance = this;\r\n  }\r\n\r\n  get lastStyle() {\r\n    return this._styles[this._styles.length - 1];\r\n  }\r\n\r\n  get fillColor() {\r\n    return this.lastStyle.fillColor;\r\n  }\r\n\r\n  get strokeColor() {\r\n    return this.lastStyle.strokeColor;\r\n  }\r\n\r\n  get strokeWidth() {\r\n    return this.lastStyle.strokeWidth;\r\n  }\r\n\r\n  get scaleValue() {\r\n    return this.transformMatrixValue.scaling;\r\n  }\r\n\r\n  get translateValue() {\r\n    return this.transformMatrixValue.translation;\r\n  }\r\n\r\n  get rotateValue() {\r\n    return  this.transformMatrixValue.rotation;\r\n  }\r\n\r\n  get transformMatrixValue() {\r\n    return this._styles.reduce((acc, {transform}) => acc.appended(transform), new Paper.Matrix());\r\n  }\r\n\r\n  get width() {\r\n    return this.state.width;\r\n  }\r\n\r\n  get height() {\r\n    return this.state.height;\r\n  }\r\n\r\n  pop() {\r\n    this._styles = this._styles.slice(0, -1);\r\n  }\r\n\r\n  push() {\r\n    const last = this._styles[this._styles.length - 1];\r\n    this._styles = [...this._styles, {\r\n      ...DEFAULTSTYLE,\r\n      strokeWidth: last.strokeWidth,\r\n      strokeColor: last.strokeColor,\r\n      fillColor: last.fillColor\r\n    }];\r\n  }\r\n\r\n  setfilename(filename, ext = undefined) {\r\n    this.filename = filename;\r\n    if(ext !== undefined) this.extension = ext;\r\n  }\r\n\r\n  CalcCanvasSize() {\r\n    let canvasWidth = window.innerWidth*0.5-60;\r\n    let canvasHeight = window.innerHeight-180;\r\n    let CanvasSize = (canvasWidth < canvasHeight) ? canvasWidth : canvasHeight;\r\n    this.setState({width: CanvasSize, height: CanvasSize});\r\n  }\r\n\r\n  init() {\r\n    let self = this;\r\n\r\n    let canvas = document.getElementById('canvas');\r\n    Canvas._PaperScope = Paper.setup(canvas);\r\n    Paper.view.onResize = (e) => {\r\n      this.windowResized(canvas);\r\n      this.componentDidUpdate();\r\n    }\r\n    window.addEventListener('resize', (e) => {\r\n      this.windowResized(canvas);\r\n      this.componentDidUpdate();\r\n    });\r\n    Paper.view.autoUpdate = false;\r\n    window.updateWorkspace();\r\n  }\r\n\r\n  fill(color) {\r\n    this.lastStyle.fillColor = color;\r\n  }\r\n\r\n  rect(x, y, width, height) {\r\n    let rect = new Paper.Path.Rectangle(new Paper.Point(x, y), new Paper.Size(width, height));\r\n    this.setPathStyle(rect);\r\n    return rect;\r\n  }\r\n\r\n  ellipse(x, y, width, height) {\r\n    let ellipse = new Paper.Path.Ellipse({\r\n      point: new Paper.Point(x, y),\r\n      size: new Paper.Size(width, height)\r\n    });\r\n    this.setPathStyle(ellipse);\r\n    return ellipse;\r\n  }\r\n\r\n  line(x1, y1, x2, y2) {\r\n    let line = new Paper.Path.Line(new Paper.Point(x1, y1), new Paper.Point(x2, y2));\r\n    this.setPathStyle(line);\r\n    return line;\r\n  }\r\n\r\n  triangle(x, y, width) {\r\n    let triangle = new Paper.Path.RegularPolygon(new Paper.Point(x + width / 2, y + width / 2), 3, width / 2);\r\n    this.setPathStyle(triangle);\r\n    return triangle;\r\n  }\r\n\r\n  translate(x, y = x) {\r\n    let matrix = new Paper.Matrix();\r\n    this.lastStyle.transform = this.lastStyle.transform.appended(matrix.translate(x, y));\r\n  }\r\n\r\n  scale(x, y = x, cx = 0, cy = cx) {\r\n    let matrix = new Paper.Matrix();\r\n    this.lastStyle.transform = this.lastStyle.transform.appended(matrix.scale(x, y, new Paper.Point(cx, cy)));\r\n  }\r\n\r\n  rotate(angle, cx = 0, cy = cx) {\r\n    let matrix = new Paper.Matrix();\r\n    this.lastStyle.transform = this.lastStyle.transform.appended(matrix.rotate(-angle, new Paper.Point(cx, cy)));\r\n  }\r\n\r\n  noStroke() {\r\n    this.strokeWeight(0);\r\n  }\r\n\r\n  strokeWeight(weight) {\r\n    this.lastStyle.strokeWidth = weight;\r\n  }\r\n\r\n  stroke(color) {\r\n    if(this.lastStyle.strokeWidth === 0) this.strokeWeight(1);\r\n    this.lastStyle.strokeColor = color;\r\n  }\r\n\r\n  text(text, x, y) {\r\n    let textObject = new Paper.PointText(new Paper.Point(x, y));\r\n    textObject.fontFamily = 'Space Grotesk';\r\n    textObject.content = text;\r\n    textObject.justification = 'center';\r\n    this.setPathStyle(textObject);\r\n    return textObject;\r\n  }\r\n\r\n  textSize(size) {\r\n\r\n  }\r\n\r\n  group() {\r\n    return new Paper.Group();\r\n  }\r\n\r\n  path(segments) {\r\n    let path = new Paper.Path(segments);\r\n    this.setPathStyle(path);\r\n    return path;\r\n  }\r\n\r\n  setPathStyle(path) {\r\n    path.style = {\r\n      fillColor: this.fillColor,\r\n      strokeWidth: this.strokeWidth,\r\n      strokeColor: this.strokeColor\r\n    };\r\n  }\r\n\r\n  setPathTransform(path) {\r\n    /*path.rotate(-this.rotateValue);\r\n    path.scale(this.scaleValue.width, this.scaleValue.height);\r\n    path.translate(this.translateValue);*/\r\n    path.transform(this.transformMatrixValue);\r\n  }\r\n\r\n  color(r, g, b, a) {\r\n    return new Paper.Color(r, g, b, a);\r\n  }\r\n\r\n  sendDraw(f) {\r\n    this.setState({\r\n      function: f\r\n    });\r\n  }\r\n\r\n  resetDraw() {\r\n    this.setState({\r\n      function: undefined\r\n    });\r\n  }\r\n\r\n  windowResized(sk) {\r\n    this.CalcCanvasSize();\r\n    this.resizeCanvas(sk);\r\n  }\r\n\r\n  resizeCanvas(sk) {\r\n    sk.width = this.state.width\r\n    sk.height = this.state.height\r\n  }\r\n\r\n  draw() {\r\n    Paper.project.clear();\r\n    this.reset();\r\n    let f = this.state.function;\r\n    if(f !== undefined) {\r\n      f(this);\r\n    }\r\n    Paper.view.draw();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.CalcCanvasSize();\r\n    this.init();\r\n  }\r\n\r\n  reset() {\r\n    this._styles = [{...DEFAULTSTYLE}];\r\n    this.notifyAll();\r\n  }\r\n\r\n  attach(obj) {\r\n    this.observers.push(obj);\r\n  }\r\n\r\n  detach(obj) {\r\n    this.observers = this.observers.filter((observer) => observer !== obj);\r\n  }\r\n\r\n  notifyAll() {\r\n    this.observers.forEach((observer) => {\r\n      observer.receiveNotification();\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.draw();\r\n  }\r\n\r\n  getImageData(svg = false) {\r\n    if(svg) {\r\n      return Canvas._PaperScope.project.exportSVG({\r\n        asString: true,\r\n        matchShapes: true,\r\n        bounds: new Paper.Rectangle(new Paper.Point(0, 0), new Paper.Size(this.width, this.height))\r\n      });\r\n    } else {\r\n      const canvas = Canvas._PaperScope.project.view.element;\r\n      return canvas.toDataURL('image/png').replace(/^data:image\\/(png|jpg);base64,/, '');\r\n    }\r\n  }\r\n\r\n  toBlob(callback, mimeType = 'image/png', qualityArgument = 0.80) {\r\n    const canvas = Canvas._PaperScope.project.view.element;\r\n    canvas.toBlob(callback, mimeType, qualityArgument);\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"canvasContainer\">\r\n        <div id=\"renderer\">\r\n          <canvas id=\"canvas\" width={this.state.width} height={this.state.height} resize=\"true\"/>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCanvas._instance = undefined;\r\nCanvas._PaperScope = undefined;\r\n\r\n/*PropTypes*/\r\nCanvas.propTypes = {\r\n  width: PropTypes.number,\r\n  height: PropTypes.number,\r\n  cells: PropTypes.number\r\n}\r\n\r\nexport default Canvas;\r\n","import React, { Component } from 'react';\r\nimport './ContextMenuBox.css';\r\nimport { ContextMenu, MenuItem, SubMenu, ContextMenuTrigger } from \"react-contextmenu\";\r\nimport shortid from 'shortid';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport arrow_right from '../../Icons/arrow_rightUI.svg';\r\n\r\n\r\n\r\nclass ContextMenuBox extends Component {\r\n  state = {};\r\n\r\n  getMenu(m, handleClick) {\r\n    return m.map(\r\n      (item, index) => {\r\n        let icon = window.getIconClassFromName(item.type);\r\n        if (item.elements === undefined || item.elements.length === 0) {\r\n          return (<MenuItem onClick={handleClick} data={{ type: item.type}} key={shortid.generate()}>\r\n            {icon && <span className=\"react-contextmenu-itemIcon\"><SVG src={icon}/></span>}\r\n            <span className=\"react-contextmenu-itemText\">{item.name ? item.name : item.type}</span>\r\n          </MenuItem>);\r\n        } else {\r\n          return (<SubMenu key={shortid.generate()} title={\r\n            <>\r\n              <span  className=\"react-contextmenu-itemLabel\">\r\n              {icon && <span className=\"react-contextmenu-itemIcon\"><SVG src={icon}/></span>}\r\n              <span className=\"react-contextmenu-itemText\">{item.name ? item.name : item.type}</span>\r\n              </span>\r\n              <span className=\"react-contextmenu-itemIcon\"><SVG src={arrow_right}/></span>\r\n            </>\r\n          }>\r\n              {this.getMenu(item.elements, handleClick)}\r\n              <span className='react-contextmenu-borderTop'></span>\r\n          </SubMenu>);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  render() {\r\n\r\n    let menuItems = [];\r\n\r\n    for(let key in this.props.menu) {\r\n      let suppMenu = this.props.menu[key];\r\n      if( suppMenu.menu && suppMenu.handleClick ) {\r\n        menuItems = menuItems.concat(this.getMenu(suppMenu.menu, suppMenu.handleClick));\r\n      }\r\n    }\r\n\r\n    return (\r\n      <>\r\n        <ContextMenuTrigger id={this.props.id} holdToDisplay={-1}>\r\n            {this.props.children}\r\n        </ContextMenuTrigger>\r\n        {(menuItems.length > 0) && <ContextMenu id={this.props.id}>\r\n\r\n            {menuItems}\r\n          <span className='react-contextmenu-borderTop'></span>\r\n        </ContextMenu>}\r\n      </>\r\n    );\r\n\r\n\r\n\r\n  }\r\n}\r\n\r\nexport default ContextMenuBox;\r\n","class Color {\r\n\r\n  constructor(r = 0, g = 0, b = 0, a = 255) {\r\n    this.r = r;\r\n    this.g = g;\r\n    this.b = b;\r\n    this.a = a;\r\n  }\r\n\r\n  getColor(sk) {\r\n    return sk.color(this.r / 255, this.g / 255, this.b / 255, this.a / 255);\r\n  }\r\n\r\n}\r\n\r\nColor.className = \"Color\";\r\n\r\nexport default Color;\r\n","import ReactDOM from 'react-dom';\r\n\r\nlet _draggable = null;\r\nlet _droppables = {};\r\nlet _draggableIndex = 0;\r\n\r\nclass DragManager {\r\n    static _instance = null;\r\n    \r\n    static get instance() {\r\n        if(this._instance === null) {\r\n            this._instance = new DragManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    set draggable(target) {\r\n        _draggable = target;\r\n        let node = ReactDOM.findDOMNode(target.refs.box);\r\n        while((node = node.previousElementSibling) != null) {\r\n            _draggableIndex++;\r\n        }\r\n    }\r\n\r\n    get draggableParent() {\r\n        return _draggable.props.parent;\r\n    }\r\n\r\n    get draggableIndex() {\r\n        return _draggableIndex;\r\n    }\r\n\r\n    clear() {\r\n        _draggable = null;\r\n        this.clearDroppable();\r\n        _draggableIndex = 0;\r\n    }\r\n\r\n    clearDroppable() {\r\n        for(let droppableKey in _droppables) {\r\n            let droppable = _droppables[droppableKey];\r\n        }\r\n        _droppables = {};\r\n    }\r\n\r\n    addDroppable(box) {\r\n        _droppables[box.props.id] = box;\r\n    }\r\n}\r\n\r\nexport default DragManager;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './Box.css';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport { ContextMenuTrigger } from \"react-contextmenu\";\r\nimport Color from '../Colors/Color';\r\nimport DragManager from '../../DragManager';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport cancel from '../../Icons/cancel.svg';\r\nimport minimize from '../../Icons/minimize.svg';\r\nimport info from '../../Icons/info.svg';\r\n\r\nconst menu = [\r\n  {\r\n    type: 'Placement',\r\n    elements: [\r\n      {\r\n        type: 'Grid'\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: 'Elements',\r\n    elements: [\r\n      {\r\n        name: 'Basic Shapes',\r\n        type: 'Rectangle',\r\n        elements: [\r\n          {\r\n            type: 'Rectangle'\r\n          },\r\n          {\r\n            type: 'Triangle'\r\n          },\r\n          {\r\n            type: 'Ellipse'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        type: 'HHatching',\r\n        name: 'Hatching',\r\n        elements: [\r\n          {\r\n            type: 'HHatching',\r\n            name: 'Horizontal'\r\n          },\r\n          {\r\n            type: 'VHatching',\r\n            name: 'Vertical'\r\n          },\r\n          {\r\n            type: 'LOHatching',\r\n            name: 'Left Oblique'\r\n          },\r\n          {\r\n            type: 'ROHatching',\r\n            name: 'Right Oblique'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        name: 'Characters',\r\n        type: 'Character',\r\n        elements: [\r\n          {\r\n            type: 'Zero',\r\n            name: 'Zero'\r\n          },\r\n          {\r\n            type: 'One',\r\n            name: 'One'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        type: 'Arrow'\r\n      },\r\n      {\r\n        type: 'Void'\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    type: 'Markov'\r\n  },\r\n  {\r\n    type: 'Recursion'\r\n  }\r\n];\r\n\r\nconst menuColor = [\r\n  {\r\n    type: 'Color',\r\n    elements: [\r\n      {type: 'Black'},\r\n      {type: 'White'},\r\n      {type: 'Red'},\r\n      {type: 'Orange'},\r\n      {type: 'Yellow'},\r\n      {type: 'Green'},\r\n      {type: 'LightBlue'},\r\n      {type: 'Blue'}\r\n    ]\r\n  }\r\n];\r\n\r\nconst className = \"Box\";\r\nconst unauthorized = [];\r\n\r\nfunction getFunctionClass(child, object) {\r\n  for(let key in object) {\r\n    const cl = window.getClassFromName(key);\r\n    if(!cl) return undefined;\r\n    const instanceOfChild = new child();\r\n    if(instanceOfChild instanceof cl) {\r\n      return object[key];\r\n    }\r\n  }\r\n}\r\n\r\n/*Pencil*/\r\nclass Box extends Component {\r\n\r\n  static get id() {\r\n    return Box._id++;\r\n  }\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return unauthorized;\r\n  }\r\n\r\n  state = {\r\n    children: [],\r\n    style: {},\r\n    dragEnter: -1,\r\n    isMinimized: false,\r\n    isInfo: false,\r\n    transforms: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if(props && this.props.state) {\r\n      this.state = this.props.state;\r\n      this.initStateFromSavedState();\r\n    } else {\r\n      this.initState();\r\n    }\r\n\r\n    this.parentsList = this.props ? {...this.props.parentsList, [this.constructor.className]: true} : {[this.constructor.className]: true};\r\n    this.ref = this;\r\n    this.transforms = {};\r\n    this.className = Box.className;\r\n    this.drawBeforeType = {};\r\n    this.reloadMenu();\r\n    \r\n    this.suppMenu = [];\r\n    this.doBeforeAddChild = {};\r\n    this.isFlexVertical = true;\r\n    this.lastEnter = null;\r\n    this.contentRect = {width: 0, height: 0};\r\n    this.hasInfo = false;\r\n    this.canMinimize = true;\r\n  }\r\n\r\n  initStateFromSavedState() {\r\n    const {r, g, b, a} = this.state.color;\r\n    this.state.color = new Color(r, g, b, a);\r\n    this.state = Box.checkChildrenFromSavedState(this.state);\r\n  }\r\n\r\n  hasParent(className) {\r\n    return this.parentsList[className];\r\n  }\r\n\r\n  static checkChildrenFromSavedState(state) {\r\n    if(state === undefined) return state;\r\n    if(state.children !== undefined && state.children.length > 0) {\r\n      return {\r\n        ...state,\r\n        children: state.children.map(({type, id, state}) => {\r\n          if(typeof type === 'string') {\r\n            return {type: window.getClassFromName(type), id, state: Box.checkChildrenFromSavedState(state)};\r\n          } else {\r\n            return {type, id, state};\r\n          }\r\n        })\r\n      }\r\n    }\r\n    return {...state};\r\n  }\r\n\r\n  filterUnauthorized(menu) {\r\n    if(this.constructor.unauthorized.indexOf('*') !== -1) {\r\n      return [];\r\n    }\r\n    const filteredMenu = menu.filter((item) => this.constructor.unauthorized.indexOf(item.type) === -1);\r\n    if(this.hasParent('Recursion')) {\r\n      return [...filteredMenu, {type: 'ThisBox'}];\r\n    }\r\n    return filteredMenu;\r\n  }\r\n\r\n  reloadMenu() {\r\n    this.menu = [\r\n      {\r\n        menu: this.filterUnauthorized(menu),\r\n        handleClick: (event, data) =>  {\r\n          if(data.type !== undefined) {\r\n            window.addClassToElement(data.type, this);\r\n          }\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  initState() {\r\n    this.state.color = new Color(255, 255, 255);\r\n    this.state.scale = {x: 1, y: 1};\r\n  }\r\n\r\n  doBeforeSetChildren(children) {\r\n    return {children};\r\n  }\r\n\r\n  addDrawBeforeType(type, f, exceptions = []) {\r\n    if(!(f instanceof Function)) return;\r\n    if(!this.drawBeforeType[type]) {\r\n      this.drawBeforeType[type] = [{callback: f, exceptions}];\r\n    } else {\r\n      this.drawBeforeType[type].push({callback: f, exceptions});\r\n    }\r\n  }\r\n\r\n  callDrawBeforeType(sk, type, child) {\r\n    for(let i = 0; i < this.drawBeforeType[type].length; ++i) {\r\n      const isException = this.drawBeforeType[type][i].exceptions.reduce((acc, exception) => acc || child instanceof window.getClassFromName(exception), false);\r\n      if(isException) {\r\n        continue;\r\n      }\r\n      this.drawBeforeType[type][i].callback(sk);\r\n    }\r\n  }\r\n\r\n  beforeAddChild(child) {\r\n    const functionToCall = getFunctionClass(child, this.doBeforeAddChild);\r\n\r\n    if(functionToCall instanceof Function) {\r\n      return functionToCall(child);\r\n    } else {\r\n      return child;\r\n    }\r\n  }\r\n\r\n  addChild(child) {\r\n    if(!child) return;\r\n    let obj = new child(); //tricky\r\n    if(obj instanceof Box && this.isAuthorized(child)) {\r\n      this.setChildren([{type:this.beforeAddChild(child), id:Box.id}]);\r\n    }\r\n  }\r\n\r\n  pushChild(child) {\r\n    if(!child || !child.type || !child.id) return;\r\n    let obj = new child.type(); //tricky\r\n    if(this.isAuthorized(child.type) && obj instanceof Box) {\r\n      this.setChildren([child]);\r\n    }\r\n  }\r\n\r\n  insertChild(child, index = 0) {\r\n    this.pushChild(child);\r\n  }\r\n\r\n  setChildren(children) {\r\n    this.setState(this.doBeforeSetChildren(children));\r\n  }\r\n\r\n  isAuthorized(cl) {\r\n    const unauthorized = this.constructor.unauthorized;\r\n    return window.isAuthorized(cl, unauthorized);\r\n  }\r\n\r\n  removeFromParent() {\r\n    let children = this.props.parent.state.children;\r\n    children = children.filter(el => el.id !== this.props.id);\r\n    this.props.parent.setChildren(children);\r\n    window.updateWorkspace();\r\n  }\r\n\r\n  addNext(elmnt) {\r\n    if(elmnt !== undefined) {\r\n      if(elmnt instanceof Box) {\r\n        this.next = elmnt;\r\n        this.nextType = elmnt.constructor.name;\r\n      }\r\n    }\r\n  }\r\n\r\n  setStyle(style) {\r\n    this.setState({\r\n      style: {...this.state.style, ...style}\r\n    });\r\n  }\r\n\r\n  drawBeforeChild(sk, child) {\r\n    if(!child) return;\r\n    for(let key in this.drawBeforeType) {\r\n      if(child instanceof window.getClassFromName(key)) {\r\n        this.callDrawBeforeType(sk, key, child);\r\n      }\r\n    }\r\n  }\r\n\r\n  draw(sk) {\r\n\r\n  }\r\n\r\n  getChildren() {\r\n    this.next = undefined;\r\n    let children = [];\r\n\r\n    if(this.state.children.length > 0) {\r\n      let child = this.state.children[0];\r\n      children.push(<child.type key={child.id} parentsList={this.parentsList} parent={this} id={child.id} ref={el => {this.next = el ? el.ref : null;}} saveState={(state) => {child.state = state}} state={child.state}/>);\r\n    }\r\n\r\n    if(this.state.dragEnter >= 0) {\r\n      children.splice(this.state.dragEnter, 0, this.getBoxPlaceHolder());\r\n    }\r\n\r\n    return children;\r\n  }\r\n\r\n  renderBox() {\r\n    return null;\r\n  }\r\n\r\n  static boxToJSON(constructor, state, id = Box.id) {\r\n    return {type: constructor.className, id: id, state: Box.stateToJSON(state)};\r\n  }\r\n\r\n  toJSON() {\r\n    return this.constructor.boxToJSON(this.constructor, this.state);\r\n  }\r\n\r\n  static stateToJSON(state) {\r\n    if(state === undefined) return state;\r\n    if(state.children !== undefined && state.children.length > 0) {\r\n      return {...state, children: state.children.map(({type, id, state}) => type.boxToJSON(type, state, id))};\r\n    }\r\n    return {...state};\r\n  }\r\n\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n  getBoxPlaceHolder() {\r\n    return <div className=\"BoxPlaceHolder\" key='ph20'><p>The Box will appear here</p></div>;\r\n  }\r\n\r\n  getColorMenu() {\r\n    const colorMenu = [\r\n      {\r\n        menu: menuColor,\r\n        handleClick: (event, data) => {\r\n          if(data.type) {\r\n            let color = window.getClassFromName(data.type);\r\n            if(color) this.setState({color: new color()});\r\n            window.updateWorkspace();\r\n          }\r\n        }\r\n      }\r\n    ];\r\n\r\n    return colorMenu;\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const {saveState} = this.props;\r\n    if(saveState) {\r\n      saveState(this.state);\r\n    }\r\n  }\r\n\r\n  onDragStart(e) {\r\n    const json = this.toJSON();\r\n    e.dataTransfer.setData(this.constructor.className, JSON.stringify(json));\r\n    e.dataTransfer.effectAllowed = 'move';\r\n    DragManager.instance.draggable = this;\r\n  }\r\n\r\n  onDragEnd(e) {\r\n    if(e.dataTransfer.dropEffect === 'move') {\r\n      this.removeFromParent();\r\n    }\r\n    e.dataTransfer.clearData();\r\n    DragManager.instance.clear();\r\n  }\r\n\r\n  onDragEnter(e) {\r\n    const last = e.dataTransfer.types.length - 1;\r\n    if(last >= 0 && this.isAuthorized(e.dataTransfer.types[last])) {\r\n      e.preventDefault();\r\n      e.dataTransfer.dropEffect = \"move\";\r\n      const index = this.getDragItemIndex(e.screenX, e.screenY);\r\n      \r\n      if(index !== this.state.dragEnter) {\r\n        this.setState({dragEnter: index});\r\n      }\r\n      this.lastEnter = e.target;\r\n      DragManager.instance.addDroppable(this);\r\n    } else {\r\n      e.dataTransfer.dropEffect = \"none\";\r\n    }\r\n    e.stopPropagation();\r\n  }\r\n\r\n  onDrag(e) {\r\n\r\n  }\r\n\r\n  onDragLeave(e) {\r\n    if(e.target === this.lastEnter && this.state.dragEnter >= 0) {\r\n      this.setState({dragEnter: -1});\r\n      this.lastEnter = null;\r\n    }\r\n\r\n    e.stopPropagation();\r\n  }\r\n\r\n  onDragOver(e) {\r\n    this.onDragEnter(e);\r\n  }\r\n\r\n  onDrop(e) {\r\n\r\n    const last = e.dataTransfer.types.length - 1;\r\n    if(last < 0) return false;\r\n\r\n    const json = JSON.parse(e.dataTransfer.getData(e.dataTransfer.types[last]));\r\n    this.insertChild({type: window.getClassFromName(json.type), id: json.id, state: json.state}, this.state.dragEnter);\r\n    this.setState({dragEnter: -1});\r\n    e.stopPropagation();\r\n  }\r\n\r\n  getDragItemIndex(x, y) {\r\n    const container = ReactDOM.findDOMNode(this.refs.container);\r\n    let index = 0;\r\n    const dragManager = DragManager.instance;\r\n\r\n    let children = Array.from(container.children).filter((child) => child.className !== 'BoxPlaceHolder');\r\n\r\n    for(let child of children) {\r\n      if(child.nodeType === 1) {\r\n        const box = child.getBoundingClientRect();\r\n        const isx = ( x < ( box.left + box.width / 2 ) );\r\n        const isy = ( y < ( box.top + box.height ) );\r\n        if((!this.isFlexVertical && isx) || (this.isFlexVertical && isy)) {\r\n          break;\r\n        }\r\n        index++;\r\n      }\r\n    }\r\n\r\n    // No Placeholder if next to the dragged box\r\n    if(dragManager.draggableParent === this && (index === dragManager.draggableIndex || index - 1 === dragManager.draggableIndex)) {\r\n      index = -1;\r\n    }\r\n\r\n    return index;\r\n  }\r\n\r\n  onClose() {\r\n    this.removeFromParent();\r\n    window.updateWorkspace();\r\n  }\r\n\r\n  onMinimize() {\r\n    this.setState({isMinimized: !this.state.isMinimized, isInfo: false});\r\n  }\r\n\r\n  onInfo() {\r\n    this.setState({isInfo: !this.state.isInfo});\r\n    if(this.refs.content) {\r\n      this.contentRect = this.refs.content.getBoundingClientRect();\r\n    }\r\n  }\r\n\r\n  getInfo() {\r\n    return null;\r\n  }\r\n\r\n  doBeforeRender() {\r\n    // Void\r\n  }\r\n\r\n  render() {\r\n    let c = this.state.color;\r\n    let isNotBlack = (c.r+c.g+c.b !== 0);\r\n    let formatedColor = \"rgba(\"+c.r+\", \"+c.g+\", \"+c.b+\", \"+c.a/255+\")\";\r\n    let formatedTextColor = (isNotBlack) ? formatedColor : \"rgba(255, 255, 255, 1)\";\r\n    let formatedBackgroundColor = (isNotBlack) ? \"rgba(0, 0, 0, 1)\" : \"rgba(255, 255, 255, 1)\" ;\r\n\r\n    const icon = this.constructor.icon;\r\n\r\n    const children = this.getChildren();\r\n    const transforms = this.getTransforms();\r\n    const box = this.renderBox();\r\n    const infoBox = this.getInfo();\r\n\r\n    this.doBeforeRender();\r\n\r\n    return (\r\n      <div className={this.className} style={this.state.style} ref='box'>\r\n        <ContextMenuBox id={this.constructor.className + this.props.id} menu={[...this.menu, ...this.getColorMenu(), ...this.suppMenu]}>\r\n          <div className=\"Box__wrapper\">\r\n            <div className=\"Box_titleOptions\">\r\n              {this.hasInfo && !this.state.isMinimized && <span className=\"Box__titleOption\" onClick={this.onInfo.bind(this)}>\r\n                <SVG src={info}/>\r\n              </span>}\r\n              {this.canMinimize && <span className=\"Box__titleOption\" onClick={this.onMinimize.bind(this)}>\r\n                  <SVG src={minimize}/>\r\n              </span>}\r\n              <span className=\"Box__titleOption\" onClick={this.onClose.bind(this)}>\r\n                  <SVG src={cancel}/>\r\n              </span>\r\n            </div>\r\n            <span draggable=\"true\" className=\"Box__title\" onDragStart={this.onDragStart.bind(this)} onDragEnd={this.onDragEnd.bind(this)} onDrag={this.onDrag.bind(this)}>\r\n              {icon && <SVG className=\"Box__titleIcon\" src={icon} style={{fill: formatedColor, backgroundColor: formatedBackgroundColor}}/>}\r\n              <span className=\"Box__titleText\" style={{color: formatedTextColor}}>{this.constructor.className}</span>\r\n            </span>\r\n            {this.state.isInfo && <div className=\"Box__info\" style={{minHeight: this.contentRect.height ? this.contentRect.height : '', maxWidth: this.contentRect.width ? this.contentRect.width : ''}}>{infoBox}</div>}\r\n            {!this.state.isMinimized && !this.state.isInfo && <span ref='content' className=\"Box__content\">\r\n              <ContextMenuTrigger id={\"\"}>\r\n                {box}\r\n                {transforms !== null && <div className='TransformBox'>{transforms}</div>}\r\n              </ContextMenuTrigger>\r\n              <div className='DropBox'>\r\n                <ContextMenuTrigger id={this.constructor.className + this.props.id} holdToDisplay={-1}>\r\n                  {this.constructor.unauthorized.indexOf(\"*\") === -1 && <div className=\"Box__container\" ref='container' onDrop={this.onDrop.bind(this)} onDragEnter={this.onDragEnter.bind(this)} onDragOver={this.onDragOver.bind(this)} onDragLeave={this.onDragLeave.bind(this)}>\r\n                    {!children.length && <span className=\"Box__placeholder\">Right click to add</span>}\r\n                    {children}\r\n                  </div>}\r\n                </ContextMenuTrigger>\r\n              </div>\r\n            </span>}\r\n          </div>\r\n        </ContextMenuBox>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nBox._id = 0; //or use shortid ?\r\n\r\nexport default Box;\r\n","import React from 'react';\r\nimport './BoxGroup.css';\r\nimport Box from '../Box/Box';\r\n\r\nconst className = \"BoxGroup\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass BoxGroup extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className = BoxGroup.className;\r\n    this.elements = [];\r\n  }\r\n\r\n  addChild(child) {\r\n\r\n    if(!child) return;\r\n    let obj = new child(); //tricky\r\n    let children = this.state.children;\r\n    if(obj instanceof Box && this.isAuthorized(child)) {\r\n      this.setChildren([...this.state.children, {type:this.beforeAddChild(child), id:Box.id}]);\r\n    }\r\n  }\r\n\r\n  pushChild(child) {\r\n    if(!child || !(\"type\" in child) || !(\"id\" in child)) return;\r\n    let obj = new child.type(); //tricky\r\n    if(this.isAuthorized(child.type) && obj instanceof Box) {\r\n      let children = this.state.children;\r\n      children.push(child);\r\n      this.setChildren(children);\r\n    }\r\n  }\r\n\r\n  setChildren(children) {\r\n    this.elements = [];\r\n    super.setChildren(children);\r\n  }\r\n\r\n  draw(sk) {\r\n    let el = this.elements;\r\n    for(let i = 0; i < el.length; ++i) {\r\n       let element = el[i];\r\n       sk.push();\r\n         this.drawBeforeChild(sk, element);\r\n         if(element) element.draw(sk);\r\n       sk.pop();\r\n    }\r\n  }\r\n\r\n  initElements() {\r\n\r\n    let elements = [];\r\n\r\n    const children = React.Children.map(this.props.children,\r\n       (child, index) => {\r\n              elements.push(child);\r\n              //box.parent = callback;\r\n    });\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    //this.initElements();\r\n  }\r\n\r\n  getChildren() {\r\n    this.elements = [];\r\n    let children = this.state.children.map((child, index) =>\r\n      <child.type key={child.id} id={child.id} parentsList={this.parentsList} parent={this} ref={el => {if(el) this.elements[index] = el.ref;}} saveState={(state) => {child.state = state}} state={child.state}/>\r\n    );\r\n\r\n    if(this.state.dragEnter >= 0) {\r\n      children.splice(this.state.dragEnter, 0, this.getBoxPlaceHolder());\r\n    }\r\n\r\n    return children;\r\n  }\r\n\r\n  insertChild(child, index = 0) {\r\n    if(!child || !(\"type\" in child) || !(\"id\" in child) || index > this.state.children.length) return;\r\n    if(index === this.state.children.length) {\r\n      this.pushChild(child);\r\n      return;\r\n    }\r\n    let obj = new child.type(); //tricky\r\n    if(this.isAuthorized(child.type) && obj instanceof Box) {\r\n      let children = this.state.children;\r\n      children.splice(index, 0, child);\r\n      this.setChildren(children);\r\n    }\r\n  }\r\n\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n  renderBox() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default BoxGroup;\r\n","import Color from './Color';\r\n\r\nclass Black extends Color {\r\n\r\n  constructor() {\r\n    super(0, 0, 0, 255);\r\n  }\r\n\r\n}\r\n\r\nBlack.className = \"Black\";\r\n\r\nexport default Black;\r\n","import React from 'react';\r\nimport './Workspace.css';\r\nimport Canvas from '../Canvas/Canvas';\r\nimport BoxGroup from '../BoxGroup/BoxGroup';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport Black from '../Colors/Black';\r\n\r\nconst menuColor = [\r\n  {\r\n    type: 'Background Color',\r\n    elements: [\r\n      {type: 'Black'},\r\n      {type: 'White'},\r\n      {type: 'Red'},\r\n      {type: 'Orange'},\r\n      {type: 'Yellow'},\r\n      {type: 'Green'},\r\n      {type: 'LightBlue',\r\n      name: 'Light Blue'},\r\n      {type: 'Blue'}\r\n    ]\r\n  }\r\n];\r\n\r\nconst menuRefresh = [\r\n  {\r\n    type: 'Refresh'\r\n  }\r\n];\r\n\r\nconst className = \"Workspace\";\r\nconst unauthorized = [\"Markov\", \"Series\"];\r\n\r\nclass Workspace extends BoxGroup {\r\n\r\n  static _instance;\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return unauthorized;\r\n  }\r\n\r\n  static addChild(box) {\r\n    if(Workspace._instance !== undefined) {\r\n      Workspace._instance.addChild(box);\r\n    }\r\n  }\r\n\r\n  static forceUpdate() {\r\n    if(Workspace._instance !== undefined) {\r\n      Workspace._instance.forceUpdate();\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    if(Workspace._instance !== undefined) {\r\n      return Workspace._instance;\r\n    }\r\n    super(props);\r\n    this.className = this.constructor.className;\r\n    this.elements = []; //no this.state.elements\r\n    this.isFlexVertical = false;\r\n    this.startDrag = {x: 0, y: 0};\r\n    this.addDrawBeforeType(\"Figure\", function(sk) {\r\n      sk.translate(sk.width / 2, sk.height / 2);\r\n      sk.scale(sk.width, sk.height);\r\n      //sk.strokeWeight(1 / sk.width);\r\n    });\r\n    this.addDrawBeforeType(\"Recursion\", function(sk) {\r\n      sk.translate(sk.width / 2, sk.height / 2)\r\n      sk.scale(sk.width, sk.height);\r\n      //sk.strokeWeight(1 / sk.width);\r\n    });\r\n    Workspace._instance = this;\r\n    // Redefinition of Menu Colors\r\n    this.suppMenu = [\r\n      {\r\n        menu: menuColor,\r\n        handleClick: (event, data) => {\r\n          if(data.type) {\r\n            let color = window.getClassFromName(data.type);\r\n            if(color) this.setState({color: new color()});\r\n            window.updateWorkspace();\r\n          }\r\n        }\r\n      },\r\n      {\r\n        menu: menuRefresh,\r\n        handleClick: (event, data) => {\r\n          window.updateWorkspace();\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.children = [];\r\n    this.state.color = new Black();\r\n  }\r\n\r\n  draw(sk) {\r\n    sk.fill(this.state.color.getColor(sk));\r\n    sk.rect(0, 0, sk.width, sk.height);\r\n    //background.sendToBack();\r\n    super.draw(sk);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    let canvas = new Canvas();\r\n    canvas.sendDraw(this.draw.bind(this));\r\n  }\r\n\r\n  onDragStart(e) {\r\n    this.startDrag.x = e.screenX;\r\n    this.startDrag.y = e.screenY;\r\n    let img = document.createElement('img');\r\n    img.src = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';\r\n    e.dataTransfer.setDragImage(img, 0, 0);\r\n    e.dataTransfer.effectAllowed = \"all\";\r\n    e.stopPropagation();\r\n  }\r\n\r\n  onDrag(e) {\r\n    if(this.state.children.length === 0) return;\r\n    e.preventDefault();\r\n    if(e.screenX || e.screenY) {\r\n      let target = e.target;\r\n      let movX = e.screenX - this.startDrag.x;\r\n      let movY = e.screenY - this.startDrag.y;\r\n      this.startDrag.x = e.screenX;\r\n      this.startDrag.y = e.screenY;\r\n      target.scrollLeft -= movX;\r\n      target.scrollTop -= movY;\r\n      //target.style.left = target.offsetLeft + movX + \"px\";\r\n      //target.style.top = target.offsetTop + movY + \"px\";\r\n    }\r\n    e.stopPropagation();\r\n  }\r\n\r\n  getInstructions() {\r\n    return (\r\n      <div className=\"Workspace__placeholder\">\r\n        <p className=\"Workspace__Rightclick\">Right click here</p>\r\n        <div className=\"Workspace__Instructions\">\r\n          <p>To begin with...</p>\r\n          <ol>\r\n            <li>Choose <em>Placement > Grid</em></li>\r\n            <li>Add in it a Markov</li>\r\n            <li>Add in Markov some <em>Elements</em></li>\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div draggable={this.state.children.length > 0} className={this.className} onDragStart={this.onDragStart.bind(this)} onDrag={this.onDrag.bind(this)}>\r\n        <ContextMenuBox id={this.constructor.className} menu={[...this.menu, ...this.suppMenu]}>\r\n          {this.state.children.length === 0 && this.getInstructions()}\r\n          {this.state.children.length > 0 && <div className=\"Workspace__viewBox\">\r\n            <div className='DropBox' ref='container' onDrop={this.onDrop.bind(this)} onDragEnter={this.onDragEnter.bind(this)} onDragOver={this.onDragOver.bind(this)} onDragLeave={this.onDragLeave.bind(this)}>\r\n              {this.getChildren()}\r\n            </div>\r\n          </div>}\r\n        </ContextMenuBox>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Workspace;\r\n","import React, { Component } from 'react';\r\nimport './Save.css';\r\nimport JSZip from 'jszip';\r\nimport {saveAs} from 'file-saver';\r\n\r\n// import Components\r\nimport Canvas from '../../Components/Canvas/Canvas';\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport icon_save_alt from '../../Icons/save_alt.svg';\r\nimport burst_mode from '../../Icons/burst_mode.svg';\r\nimport arrow_up from '../../Icons/arrow_upUI.svg';\r\nimport arrow_down from '../../Icons/arrow_downUI.svg';\r\n\r\n\r\nclass Save extends Component {\r\n  state = {\r\n    DownloadName: \"Untitled\",\r\n    DownloadNameSaved: \"Untitled\",\r\n    DownloadSuffixNumber: {\r\n      svg: 0,\r\n      jpg: 0\r\n    },\r\n    DownloadSuffix: \"\",\r\n    DownloadFormat: \"jpg\",\r\n    zipNumber: 10\r\n  }\r\n  downloadImage = function(el) {\r\n\r\n    let nb = this.state.DownloadSuffixNumber;\r\n    let dname = this.state.DownloadName;\r\n    nb[this.state.DownloadFormat] = nb[this.state.DownloadFormat]+1;\r\n    this.setState({DownloadSuffixNumber: nb});\r\n    this.setState({DownloadSuffix: \"-\" + (nb[this.state.DownloadFormat]+1)});\r\n\r\n    if (this.state.DownloadName === this.state.DownloadNameSaved) {\r\n      dname = (nb[this.state.DownloadFormat] === 1) ? this.state.DownloadName : this.state.DownloadName + \"-\" + nb[this.state.DownloadFormat];\r\n    } else {\r\n      this.setState({DownloadNameSaved: this.state.DownloadName});\r\n    }\r\n\r\n    if(this.state.DownloadFormat === 'svg') {\r\n      const blob = new Blob([Canvas.getImageData(true)], {type : 'image/svg+xml'});\r\n      saveAs(blob, dname + '.svg');\r\n    } else {\r\n      Canvas.toBlob((blob) => saveAs(blob, dname + '.jpg'), 'image/jpeg');\r\n    }\r\n    console.log(\"SUFFIX\", nb[this.state.DownloadFormat], \"NAME + FORMAT\", dname + \".\" + this.state.DownloadFormat);\r\n  }\r\n\r\n  downloadZip = function() {\r\n    let zip = new JSZip();\r\n    zip.file(this.state.DownloadName + \".txt\", \"By Paperwork\\n\");\r\n    let img = zip.folder(this.state.DownloadName);\r\n    const isSVG = this.state.DownloadFormat === 'svg';\r\n    for(let i = 0; i < this.state.zipNumber; ++i) {\r\n      const imageData = isSVG ? btoa(Canvas.getImageData(true)) : Canvas.getImageData(false);\r\n      img.file(`${this.state.DownloadName}-${i}.${this.state.DownloadFormat}`, imageData, {base64: true});\r\n      Canvas.draw();\r\n    }\r\n    const self = this;\r\n    zip.generateAsync({type:\"blob\"})\r\n    .then(function(content) {\r\n        saveAs(content, self.state.DownloadName+\".zip\");\r\n    });\r\n  }\r\n\r\n  checkZipNumber = function(value) {\r\n    return (value === \"\" || value === parseInt(value, 10) || value >= 1000 || value <= 1) ? 10 : value;\r\n  }\r\n\r\n  incrementZipNumber = function() {\r\n    this.setState({zipNumber: (this.state.zipNumber === 1000) ? this.state.zipNumber : parseInt(this.state.zipNumber)+1})\r\n  }\r\n\r\n  decrementZipNumber = function() {\r\n    this.setState({zipNumber: (this.state.zipNumber === 1) ? this.state.zipNumber : parseInt(this.state.zipNumber)-1})\r\n  }\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"save\">\r\n              <div className=\"button burstMode border-right\" onClick={this.downloadZip.bind(this)}>\r\n                <SVG src={burst_mode}/>\r\n              </div>\r\n              <div className=\"save__zipNumber border-right\">\r\n                <input\r\n                className=\"save__zipNumberInput\"\r\n                type=\"number\"\r\n                value={this.state.zipNumber}\r\n                onChange={(event) => {\r\n                  this.setState({zipNumber: event.target.value})\r\n                }}\r\n                onBlur={(event) => {\r\n                  this.setState({zipNumber: this.checkZipNumber(event.target.value)})\r\n                }}\r\n                />\r\n                <div className=\"save__zipNumberArrows border-left\">\r\n                  <div className=\"button border-bottom\" onClick={(event) => this.incrementZipNumber()}><SVG src={arrow_up}/></div>\r\n                  <div className=\"button\" onClick={(event) => this.decrementZipNumber()}><SVG src={arrow_down}/></div>\r\n                </div>\r\n              </div>\r\n              <input\r\n              className=\"save__name\"\r\n              type=\"text\"\r\n              value={this.state.DownloadName}\r\n              onChange={(event) => {\r\n                this.setState({DownloadSuffixNumber: {svg: 0, jpg: 0}, DownloadSuffix: \"\", DownloadName: event.target.value})\r\n              }}\r\n              onBlur={(event) => {\r\n                const dname = (event.target.value === \"\") ? \"Untitled\" : event.target.value;\r\n                this.setState({DownloadName: dname});\r\n              }}\r\n              />\r\n              <span className=\"save__nameSuffixe\">{this.state.DownloadSuffix}</span>\r\n              <div className=\"save__format\">\r\n                <input id=\"save__jpg\" type=\"radio\" value=\"jpg\" name=\"saveFormat\" defaultChecked onChange={(event) => {if(event.target.checked) {this.setState({DownloadFormat: event.target.value})}}}/>\r\n                <label htmlFor=\"save__jpg\" className=\"save__formatItem button border-left\">.jpg</label>\r\n                <input id=\"save__svg\" type=\"radio\" value=\"svg\" name=\"saveFormat\" onChange={(event) => {if(event.target.checked) {this.setState({DownloadFormat: event.target.value})}}}/>\r\n                <label htmlFor=\"save__svg\" className=\"save__formatItem button border-left\">.svg</label>\r\n              </div>\r\n              <a className=\"button save__button border-left\" onClick={(event) => this.downloadImage(event.target)}>\r\n                <SVG src={icon_save_alt}/>\r\n              </a>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Save;\r\n","import { Component } from 'react';\r\nimport './Input.css';\r\n\r\nconst className = \"Input\";\r\n\r\nclass Input extends Component {\r\n\r\n    state = {};\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        if(this.props.input && this.constructor.className === this.props.input.className) {\r\n            this.initFromSavedState(this.props.input.state)\r\n        } else {\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n    }\r\n\r\n    getValue() {\r\n        return 0;\r\n    }\r\n\r\n    toJSON() {\r\n        return {};\r\n    }\r\n\r\n    initState(state) {\r\n\r\n    }\r\n}\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport Workspace from '../../Workspace/Workspace';\r\nimport Input from '../Input';\r\nimport Slider from 'rc-slider';\r\nimport './SliderBox.css';\r\n\r\nconst className = \"SliderBox\";\r\n\r\nclass SliderBox extends Input {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n        this.value = state.value;\r\n    }\r\n\r\n    init() {\r\n        this.value = this.props.defaultValue;\r\n    }\r\n\r\n    getValue() {\r\n        return this.value;\r\n    }\r\n\r\n    toJSON() {\r\n        return {value: this.value};\r\n    }\r\n\r\n    render() {\r\n        return(\r\n        <Slider\r\n        min={this.props.min}\r\n        max={this.props.max}\r\n        defaultValue={this.value}\r\n        marks={this.props.marks}\r\n        step={this.props.step}\r\n        className=\"Box__slider\"\r\n        style={{padding: '3px 0'}}\r\n        trackStyle={{height: '8px', backgroundColor: 'black', borderRadius: 'unset' }}\r\n        railStyle={{height: '8px', backgroundColor: 'black', borderRadius: 'unset' }}\r\n        handleStyle={{marginTop: '-3px', borderColor: 'black' }}\r\n        dotStyle={{bottom: '-4px', borderColor: 'black' }}\r\n        onChange={(value) => {\r\n            this.value = value;\r\n            if(this.props.onChange) {\r\n                this.props.onChange(value, this);\r\n            }\r\n        }}\r\n        onAfterChange={() => Workspace.forceUpdate()}\r\n        />\r\n        );\r\n    }\r\n}\r\n\r\nexport default SliderBox;\r\n","import React, { Component } from 'react';\r\nimport './Transform.css';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport SliderBox from '../Input/SliderBox/SliderBox';\r\nimport shortid from 'shortid';\r\nimport SVG from 'react-svg';\r\n\r\nconst inputMenu = [\r\n  {\r\n    type: 'Random'\r\n  },\r\n  {\r\n    type: 'Increment'\r\n  },\r\n  {\r\n    type: 'SliderBox',\r\n    name: 'Value'\r\n  }\r\n];\r\n\r\n/*Attribute*/\r\nclass Transform extends Component {\r\n\r\n  state = {};\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    if(this.props.state) {\r\n      this.initFromSavedState(this.props.state);\r\n    } else {\r\n      this.init();\r\n    }\r\n\r\n    this.id = shortid.generate();\r\n    this.className = Transform.className;\r\n    this.inputElement = null;\r\n    this.returns = this.props.returns || ((value) => value);\r\n    this.menu = [\r\n      {\r\n        menu: inputMenu,\r\n        handleClick: (event, data) => {\r\n          if(data.type) {\r\n            this.setState({input: window.getClassFromName(data.type)}, () => {\r\n              window.updateWorkspace();\r\n            });\r\n          }\r\n        }\r\n      }\r\n    ];\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const {saveTransform} = this.props;\r\n    if(saveTransform) {\r\n        saveTransform(this.toJSON());\r\n    }\r\n}\r\n\r\n  initFromSavedState(state) {\r\n    this.state.input = window.getClassFromName(state.input.className);\r\n  }\r\n\r\n  init() {\r\n    this.state.input = SliderBox;\r\n  }\r\n\r\n  getInputValue() {\r\n    return this.returns(this.inputElement.getValue());\r\n  }\r\n\r\n  toJSON() {\r\n    return {input: {className: this.state.input.className, state: this.inputElement.toJSON()}};\r\n  }\r\n\r\n  render() {\r\n    const {input} = this.props.state ? this.props.state : {};\r\n    return (\r\n      <ContextMenuBox id={this.constructor.className + this.id} menu={this.menu}>\r\n        <div className=\"Transform\">\r\n          {this.props.icon && <SVG className='TransformBox__icon' src={this.props.icon}/>}\r\n          <div className='TransformBox__input'>\r\n            <this.state.input {...this.props} ref={el => this.inputElement = el} input={input}/>\r\n          </div>\r\n        </div>\r\n      </ContextMenuBox>\r\n    );\r\n  }\r\n}\r\n\r\nTransform.className = \"Transform\";\r\nTransform.icon = undefined;\r\n\r\nexport default Transform;\r\n","import React, { Component } from 'react';\r\nimport './Transform.css';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport SliderBox from '../Input/SliderBox/SliderBox';\r\nimport Transform from './Transform';\r\nimport shortid from 'shortid';\r\nimport SVG from 'react-svg';\r\n\r\nconst linkMenuTypes = [\r\n  {\r\n    type: 'Link XY Axis'\r\n  }\r\n];\r\n\r\nconst unlinkMenuTypes = [\r\n    {\r\n        type: 'Unlink XY Axis'\r\n    }\r\n];\r\n\r\n/*Attribute*/\r\n//need to be refactored\r\nclass Transform2D extends Transform {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.id = shortid.generate();\r\n    this.className = Transform2D.className;\r\n    this.inputElements = {x: null, y: null};\r\n    const linkMenu = {\r\n        menu: linkMenuTypes,\r\n        handleClick: (event, data) => {\r\n            this.setState({solo: true}, () => {\r\n            window.updateWorkspace();\r\n            });\r\n          }\r\n    };\r\n    \r\n    this.menuX = [{...this.menu[0]}, linkMenu];\r\n    this.menuX[0].handleClick = (event, data) => {\r\n        if(data.type) {\r\n            this.setState({inputX: window.getClassFromName(data.type)}, () => {\r\n                window.updateWorkspace();\r\n            });\r\n        }\r\n    };\r\n\r\n    this.menuY = [{...this.menu[0]}, linkMenu];\r\n    this.menuY[0].handleClick = (event, data) => {\r\n        if(data.type) {\r\n            this.setState({inputY: window.getClassFromName(data.type)}, () => {\r\n                window.updateWorkspace();\r\n            });\r\n        }\r\n    };\r\n\r\n\r\n    const unlinkMenu = {\r\n        menu: unlinkMenuTypes,\r\n        handleClick: (event, data) => {\r\n              this.setState({solo: false}, () => {\r\n                window.updateWorkspace();\r\n              });\r\n          }\r\n    };\r\n    this.menu.push(unlinkMenu);\r\n  }\r\n\r\n  initFromSavedState(state) {\r\n      if(state.solo) {\r\n        super.initFromSavedState(state);\r\n      } else {\r\n        this.state.inputX = window.getClassFromName(state.inputX.className);\r\n        this.state.inputY = window.getClassFromName(state.inputY.className);\r\n      }\r\n\r\n      this.state.solo = state.solo;\r\n  }\r\n\r\n  init() {\r\n      super.init();\r\n      this.state.inputX = SliderBox;\r\n      this.state.inputY = SliderBox;\r\n      this.state.solo = false;\r\n  }\r\n\r\n  getInputValue() {\r\n      if(this.state.solo) {\r\n          const value = super.getInputValue()\r\n          return {x: value, y: value};\r\n      } else {\r\n          return this.returns({x: this.inputElements.x.getValue(), y: this.inputElements.y.getValue()});\r\n      }\r\n  }\r\n\r\n  toJSON() {\r\n      if(this.state.solo) {\r\n          return {...super.toJSON(), solo: this.state.solo};\r\n      } else {\r\n          return {\r\n              inputX: {className: this.state.inputX.className, state: this.inputElements.x.toJSON()},\r\n              inputY: {className: this.state.inputY.className, state: this.inputElements.y.toJSON()},\r\n              solo: this.state.solo\r\n            };\r\n      }\r\n  }\r\n\r\n  render() {\r\n\r\n    // onChange not useful\r\n    if(!this.state.solo) {\r\n        const {inputX, inputY} = this.props.state ? this.props.state : {};\r\n        return (\r\n            <div className=\"Transform\">\r\n              {this.props.icon && <SVG className='TransformBox__icon' src={this.props.icon}/>}\r\n              <div className=\"Transform2D__inputs\">\r\n                <ContextMenuBox id={this.constructor.className + this.id + '0'} menu={this.menuX}>\r\n                    <div className='TransformBox__input'>\r\n                        <this.state.inputX {...this.props} ref={el => this.inputElements.x = el} input={inputX}/>\r\n                    </div>\r\n                </ContextMenuBox>\r\n                <ContextMenuBox id={this.constructor.className + this.id + '1'} menu={this.menuY}>\r\n                    <div className='TransformBox__input'>\r\n                        <this.state.inputY {...this.props} ref={el => this.inputElements.y = el} input={inputY}/>\r\n                    </div>\r\n                </ContextMenuBox>\r\n              </div>\r\n            </div>\r\n        );\r\n    } else {\r\n        return super.render();\r\n    }\r\n    \r\n  }\r\n}\r\n\r\nTransform2D.className = \"Transform2D\";\r\nTransform2D.icon = undefined;\r\n\r\nexport default Transform2D;\r\n","import React from 'react';\r\nimport Box from '../Box/Box';\r\nimport Transform from '../Transforms/Transform';\r\nimport Transform2D from '../Transforms/Transform2D';\r\nimport scaleIcon from '../../Icons/scale.svg';\r\nimport rotateIcon from '../../Icons/rotate_left.svg';\r\nimport moveIcon from '../../Icons/move.svg';\r\nimport './Figure.css';\r\n\r\nconst className = \"Figure\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Figure extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  get scale() {\r\n    if(this.transforms['scale']) {\r\n      return this.transforms['scale'].getInputValue();\r\n    } else {\r\n      return {x: this._scale, y: this._scale};\r\n    }\r\n  }\r\n\r\n  get rotation() {\r\n    if(this.transforms['rotation']) {\r\n      return this.transforms['rotation'].getInputValue();\r\n    } else {\r\n      return this._rotation;\r\n    }\r\n  }\r\n\r\n  get width() {\r\n    return this._width;\r\n  }\r\n\r\n  get height() {\r\n    return this._height;\r\n  }\r\n\r\n  get position() {\r\n    if(this.transforms['translate']) {\r\n      return this.transforms['translate'].getInputValue();\r\n    } else {\r\n      return {x: this._x, y: this._y};\r\n    }\r\n  }\r\n\r\n  get x() {\r\n    if(this.transforms['translate']) {\r\n      return this.transforms['translate'].getInputValue().x;\r\n    } else {\r\n      return this._x;\r\n    }\r\n  }\r\n\r\n  get y() {\r\n    if(this.transforms['translate']) {\r\n      return this.transforms['translate'].getInputValue().y;\r\n    } else {\r\n      return this._y;\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Figure.className;\r\n    this._x = 0;\r\n    this._y = 0;\r\n    this._rotation = 0;\r\n    this._height = 1;\r\n    this._width = 1;\r\n    this._scale = 1;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n\r\n  }\r\n  \r\n  getTransforms() {\r\n    const {translate, scale, rotation} = this.state.transforms;\r\n\r\n    const Transforms = [\r\n      // Translation\r\n      <Transform2D \r\n        min={-1}\r\n        max={1}\r\n        defaultValue={this._x}\r\n        marks={{'-1':-1, 0:0, 1:1}}\r\n        step={0.05}\r\n        key={0}\r\n        ref={(el) => {this.transforms['translate'] = el}}\r\n        icon={moveIcon}\r\n        saveTransform={(state) => this.state.transforms['translate'] = state}\r\n        state={translate}\r\n      />,\r\n      // Scale\r\n      <Transform2D \r\n        min={0.1}\r\n        max={1.5}\r\n        defaultValue={this._scale}\r\n        marks={{0.1:0.1, 1:1, 1.5:1.5}}\r\n        step={0.1}\r\n        key={1}\r\n        ref={(el) => {this.transforms['scale'] = el}}\r\n        icon={scaleIcon}\r\n        saveTransform={(state) => this.state.transforms['scale'] = state}\r\n        state={scale}\r\n      />,\r\n      // Rotation\r\n      <Transform \r\n        min={0}\r\n        max={360}\r\n        defaultValue={this._rotation}\r\n        marks={{0:0, 90:90, 180:180, 270:270, 360:360}}\r\n        step={1}\r\n        key={2}\r\n        ref={(el) => {this.transforms['rotation'] = el}}\r\n        icon={rotateIcon}\r\n        saveTransform={(state) => this.state.transforms['rotation'] = state}\r\n        state={rotation}\r\n      />\r\n    ];\r\n    return Transforms;\r\n  }\r\n\r\n  draw(sk) {\r\n    const scale = this.scale;\r\n    const {x, y} = this.position;\r\n    sk.push();\r\n      sk.fill(this.state.color.getColor(sk));\r\n      //console.log(-sk.scaleValue.x / 2 + this.x * sk.scaleValue.x, -sk.scaleValue.y / 2 + this.y * sk.scaleValue.y);\r\n      sk.translate(-0.5 + x, -0.5 + y);\r\n      sk.rotate(this.rotation, 0.5, 0.5);\r\n      sk.scale(scale.x, scale.y, 0.5, 0.5);\r\n      this.drawFigure(sk);\r\n    sk.pop();\r\n  }\r\n}\r\n\r\nexport default Figure;\r\n","import './Rectangle.css';\r\nimport Figure from '../Figure';\r\nimport square from '../../../Icons/full_square.svg';\r\n\r\nconst className = \"Rectangle\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Rectangle extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return square;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Rectangle.className;\r\n    this._scale = 0.9;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let rect = sk.rect(0, 0, this.width, this.height);\r\n    sk.setPathTransform(rect);\r\n  }\r\n\r\n}\r\n\r\nexport default Rectangle;\r\n","import './Triangle.css';\r\nimport Figure from '../Figure';\r\nimport triangle from '../../../Icons/full_triangle.svg';\r\n\r\nconst className = \"Triangle\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Triangle extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return triangle;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Triangle.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let triangle = sk.triangle(0, 0, this.width);\r\n    sk.setPathTransform(triangle);\r\n  }\r\n}\r\n\r\n\r\nexport default Triangle;\r\n","import './Ellipse.css';\r\nimport Figure from '../Figure';\r\nimport ellipse from '../../../Icons/full_ellipse.svg';\r\n\r\nconst className = \"Ellipse\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Ellipse extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return ellipse;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Ellipse.className;\r\n  }\r\n\r\n  getTransforms() {\r\n    return super.getTransforms().slice(0, 2); // Excludes rotation\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let ellipse = sk.ellipse(0, 0, this.width, this.height);\r\n    sk.setPathTransform(ellipse);\r\n  }\r\n\r\n}\r\n\r\nexport default Ellipse;\r\n","import React from 'react';\r\nimport Figure from '../Figure';\r\nimport Transform from '../../Transforms/Transform'\r\nimport './Hatching.css';\r\n\r\nconst className = \"Hatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Hatching extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  get density() {\r\n    if(this.transforms['density']) {\r\n      return this.transforms['density'].getInputValue();\r\n    } else {\r\n      return this._density;\r\n    }\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Hatching.className;\r\n    this._density = 11;\r\n  }\r\n\r\n  getTransforms() {\r\n    const Transforms = [\r\n      // Density\r\n      <Transform\r\n        min={2}\r\n        max={20}\r\n        defaultValue={this._density}\r\n        marks={{2:1, 11:10, 20:19}}\r\n        step={1}\r\n        key={0}\r\n        ref={(el) => {this.transforms['density'] = el}}\r\n      />\r\n    ];\r\n    return Transforms;\r\n  }\r\n\r\n  draw(sk) {\r\n    sk.stroke(this.state.color.getColor(sk));\r\n    super.draw(sk);\r\n    sk.noStroke();\r\n  }\r\n\r\n}\r\n\r\nexport default Hatching;\r\n","import './HHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport HHatchingIcon from '../../../../Icons/HHatching.svg';\r\n\r\nconst className = \"HHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass HHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return HHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + HHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    const density = this.density;\r\n    let gapY = this.height / density;\r\n    let parent = sk.group();\r\n    for(var j = 0; j <= density ; j++) {\r\n      console.log(this.x, this.y + j * gapY, this.x + this.width, this.y + j * gapY);\r\n      let line = sk.line(this.x, this.y + j * gapY, this.x + this.width, this.y + j * gapY);\r\n      parent.addChild(line);\r\n    }\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default HHatching;\r\n","import './VHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport VHatchingIcon from '../../../../Icons/VHatching.svg';\r\n\r\nconst className = \"VHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass VHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return VHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + VHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    const density = this.density;\r\n    let gapX = this.width / density;\r\n\r\n    let parent = sk.group();\r\n\r\n    for(var i = 0; i <= density ; i++){\r\n      let line = sk.line(this.x + i * gapX, this.y, this.x + i * gapX, this.y + this.height);\r\n      parent.addChild(line);\r\n    }\r\n\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default VHatching;\r\n","import './LOHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport LOHatchingIcon from '../../../../Icons/LOHatching.svg';\r\n\r\nconst className = \"LOHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass LOHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return LOHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + LOHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let i = this.x;\r\n    let j = this.y + this.height;\r\n    const density = this.density;\r\n    let gapX = (this.width / density);\r\n    let gapY = (this.height / density);\r\n\r\n    let parent = sk.group();\r\n\r\n    while(i < this.x + this.width){\r\n      let line = sk.line(i, this.y, this.x+this.width, j);\r\n      parent.addChild(line);\r\n      i += gapX;\r\n      j -= gapY;\r\n    }\r\n\r\n    i = this.x + this.width;\r\n    j = this.y;\r\n    while(j < this.y + this.height){\r\n      let line = sk.line(this.x, j, i, this.y+this.height);\r\n      parent.addChild(line);\r\n      i -= gapX;\r\n      j += gapY;\r\n    }\r\n\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default LOHatching;\r\n","import './ROHatching.css';\r\nimport Hatching from '../Hatching';\r\nimport ROHatchingIcon from '../../../../Icons/ROHatching.svg';\r\n\r\nconst className = \"ROHatching\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass ROHatching extends Hatching {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return ROHatchingIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + ROHatching.className;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let i = this.x + this.width;\r\n    let j = this.y + this.height;\r\n    const density = this.density;\r\n    let gapX = (this.width / density);\r\n    let gapY = (this.height / density);\r\n\r\n    let parent = sk.group();\r\n\r\n    while(j > this.y){\r\n      let line = sk.line(this.x, j, i, this.y);\r\n      parent.addChild(line);\r\n      i -= gapX;\r\n      j -= gapY;\r\n    }\r\n\r\n    i = this.x;\r\n    j = this.y;\r\n    while(j < this.y + this.height){\r\n      let line = sk.line(i, this.y + this.height, this.x + this.width, j);\r\n      parent.addChild(line);\r\n      i += gapX;\r\n      j += gapY;\r\n    }\r\n    sk.setPathTransform(parent);\r\n  }\r\n\r\n}\r\n\r\nexport default ROHatching;\r\n","import Color from './Color';\r\n\r\nclass White extends Color {\r\n\r\n  constructor() {\r\n    super(255, 255, 255, 255);\r\n  }\r\n\r\n}\r\n\r\nWhite.className = \"White\";\r\n\r\nexport default White;\r\n","import React from 'react';\r\nimport Box from '../Box/Box';\r\nimport './Placement.css';\r\nimport Workspace from '../Workspace/Workspace';\r\nimport White from '../Colors/White';\r\n\r\nconst className = \"Placement\";\r\nconst unauthorized = [\"Placement\"];\r\n\r\n/*Pencil*/\r\nclass Placement extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Placement.className;\r\n  }\r\n\r\n  handleClick(event, data) {\r\n    if(data.type) {\r\n      this.setState({mode: window.getClassFromName(data.type), color: new White()})\r\n      Workspace.forceUpdate();\r\n    }\r\n  }\r\n\r\n  doBeforeSetChildren(children) {\r\n    this.state.color = new White(); // reload the state anyway\r\n    return super.doBeforeSetChildren(children);\r\n  }\r\n\r\n  initStateFromSavedState() {\r\n    super.initStateFromSavedState();\r\n    if(typeof this.state.mode === 'string') {\r\n      this.state.mode = window.getClassFromName(this.state.mode);\r\n    }\r\n  }\r\n\r\n  static boxToJSON(constructor, state) {\r\n    const superJSON = super.boxToJSON(constructor, state);\r\n    return {...superJSON, state: {...superJSON.state, currentMode: undefined, mode: state.mode.className}};\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.currentMode = undefined;\r\n    this.state.mode = null;\r\n  }\r\n\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n  renderMode() {\r\n    if(!this.state.mode) return null;\r\n    return (<this.state.mode key={this.constructor.className + this.state.mode.className} handleClick={this.handleClick.bind(this)} ref={el => {this.state.currentMode = el}} />);\r\n  }\r\n\r\n  draw(sk) {\r\n\r\n  }\r\n}\r\n\r\nexport default Placement;\r\n","import React, { Component } from 'react';\r\nimport Box from \"../Box/Box\";\r\n\r\nexport default function InBox(Wrapper, ...Children) {\r\n\r\n\r\n  const authorizedChildren = Children.filter(\r\n    (Child) => window.isAuthorized(Child, Wrapper.unauthorized)\r\n  );\r\n\r\n  const cl = class extends Component {\r\n\r\n    static wrapper = Wrapper;\r\n    static children = authorizedChildren;\r\n\r\n    render() {\r\n\r\n      const boxChildren = authorizedChildren.map(\r\n        (Child) => {return {type: Child, id: Box.id};}\r\n      );\r\n\r\n      return(\r\n        <Wrapper {...this.props} ref={(el) => {\r\n          if(!el) return;\r\n          this.ref = el;\r\n          el.state.children = boxChildren;\r\n          this.props.saveState(el.state);\r\n          const child = this.props.parent.state.children.find(\r\n            (child) => child.id === this.props.id\r\n          );\r\n          child.type = Wrapper;\r\n          this.props.parent.forceUpdate();\r\n          window.updateWorkspace();\r\n          }}>\r\n        </Wrapper>\r\n      );\r\n    }\r\n  };\r\n\r\n  return cl;\r\n};\r\n","import BoxGroup from '../BoxGroup/BoxGroup';\r\nimport Canvas from '../Canvas/Canvas';\r\nimport './Series.css';\r\n\r\nconst className = \"Series\";\r\nconst unauthorized = [\"Placement\", \"Series\", \"Markov\"];\r\n\r\n/*Pencil*/\r\nclass Series extends BoxGroup {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Series.className;\r\n    this.suppMenu = [];\r\n    this.currentState = 0;\r\n    Canvas.attach(this);\r\n  }\r\n\r\n  receiveNotification() {\r\n    this.currentState = 0;\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Canvas.detach(this);\r\n  }\r\n\r\n  setChildren(children) {\r\n    super.setChildren(children);\r\n    this.currentState = 0;\r\n  }\r\n\r\n  draw(sk) {\r\n    if(this.elements.length === 0) return;\r\n\r\n    if(this.elements[this.currentState]) this.elements[this.currentState].draw(sk);\r\n    this.currentState = (this.currentState + 1) % this.elements.length;\r\n  }\r\n\r\n}\r\n\r\nexport default Series;\r\n","import React, { Component } from 'react';\r\nimport ContextMenuBox from '../ContextMenuBox/ContextMenuBox';\r\nimport shortid from 'shortid';\r\nimport './Mode.css';\r\n\r\n/*Pencil*/\r\nclass Mode extends Component {\r\n\r\n  state = {\r\n  };\r\n\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className = Mode.className;\r\n    this.id = shortid.generate();\r\n    this.modes = [];\r\n    this.handleClick = this.props.handleClick || ((event, data) => {});\r\n  }\r\n\r\n  mode(sk, data) {\r\n\r\n  }\r\n\r\n  render() {\r\n    console.log(this.modes);\r\n    return (\r\n      <div className=\"gridMode\">\r\n        <ContextMenuBox id={this.constructor.className + this.id} menu={[{menu: this.modes, handleClick: this.props.handleClick}]}>\r\n          <span className=\"gridMode__label\"> Grid Distribution </span>\r\n          <span className=\"gridMode__text\"> {this.constructor.className} </span>\r\n        </ContextMenuBox>\r\n      </div>\r\n      );\r\n  }\r\n}\r\n\r\nMode.className = \"Mode\";\r\n\r\nexport default Mode;\r\n","import './GridMode.css';\r\nimport Mode from \"../Mode\";\r\n\r\nconst modes = [\r\n  {\r\n    type: 'DiagonalLeft',\r\n    name: 'Diagonal Left'\r\n  },\r\n  {\r\n    type: 'DiagonalRight',\r\n    name: 'Diagonal Right'\r\n  },\r\n  {\r\n    type: 'LinearX',\r\n    name: 'Linear X'\r\n  },\r\n  {\r\n    type: 'LinearY',\r\n    name: 'Linear Y'\r\n  },\r\n  {\r\n    type: 'Orthogonal'\r\n  },\r\n  {\r\n    type: 'SnailRight',\r\n    name: 'Snail Right'\r\n  }\r\n];\r\n\r\n\r\n/*Pencil*/\r\nclass GridMode extends Mode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + GridMode.className;\r\n    this.modes = modes;\r\n  }\r\n\r\n  mode(sk, data) {\r\n\r\n  }\r\n\r\n}\r\n\r\nGridMode.className = \"GridMode\";\r\n\r\nexport default GridMode;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass LinearX extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + LinearX.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback, lines} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    if(lines) {\r\n      for(var i = 0; i < rows; i++) {\r\n        sk.push();\r\n          sk.translate(0, row * i);\r\n          if(i > 0) {\r\n            let line = sk.line(0, 0, sk.width, 0);\r\n            sk.setPathTransform(line);\r\n          }\r\n        sk.pop();\r\n    \t}\r\n\r\n      for(var j = 0; j < columns; j++) {\r\n        sk.push();\r\n          sk.translate(j * column, 0);\r\n          if(j > 0) {\r\n            let line = sk.line(0, 0, 0, sk.height);\r\n            sk.setPathTransform(line);\r\n          }\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n    }\r\n\r\n    if(callback) {\r\n      for(var i = 0; i < rows; i++) {\r\n        sk.push();\r\n          sk.translate(0, row * i);\r\n          for(var j = 0; j < columns; j++) {\r\n            sk.push();\r\n              sk.translate(j * column, 0);\r\n              callback();\r\n            sk.pop();\r\n          }\r\n        sk.pop();\r\n    \t}\r\n    }\r\n  }\r\n}\r\n\r\nLinearX.className = \"LinearX\";\r\n\r\nexport default LinearX;\r\n","import React from 'react';\r\nimport Placement from '../Placement';\r\nimport './Grid.css';\r\nimport 'rc-slider/assets/index.css';\r\nimport SliderBox from '../../Input/SliderBox/SliderBox';\r\nimport grid_on from '../../../Icons/grid_on.svg';\r\nimport InBox from '../../InBox/InBox';\r\nimport Series from '../../Series/Series';\r\n\r\nimport LinearX from '../../Modes/GridMode/LinearX/LinearX';\r\n\r\nconst className = \"Grid\";\r\nconst unauthorized = [];\r\nconst doBeforeAddChild = {\r\n  Figure: (child) => {\r\n    return InBox(Series, child);\r\n  },\r\n  Recursion: (child) => {\r\n    return InBox(Series, child);\r\n  }\r\n}\r\n\r\n/*Pencil*/\r\nclass Grid extends Placement {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return grid_on;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Grid.className;\r\n    this.doBeforeAddChild = doBeforeAddChild;\r\n    //const {columns, rows} = this.props;\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.columns = 8;\r\n    this.state.rows = 8;\r\n    this.state.mode = LinearX;\r\n  }\r\n\r\n  draw(sk) {\r\n\r\n    var column = sk.width/this.state.columns;\r\n  \tvar row = sk.height/this.state.rows;\r\n    var elem = this.next;\r\n    var currentMode = this.state.currentMode;\r\n\r\n  \tif(!elem) sk.stroke(this.state.color.getColor(sk));\r\n\r\n    if(currentMode) {\r\n      currentMode.mode(sk, {\r\n        columns: this.state.columns,\r\n        rows: this.state.rows,\r\n        lines: elem ? false : true,\r\n        callback: function() {\r\n          if(elem) {\r\n            sk.noStroke();\r\n            sk.push();\r\n              sk.translate(column / 2, row / 2);\r\n              sk.scale(column, row);\r\n              elem.draw(sk);\r\n            sk.pop();\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  getColorMenu() {\r\n    if(this.state.mode === LinearX && this.state.children.length === 0) {\r\n      return super.getColorMenu();\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  getTransforms() {\r\n    return(\r\n      <div className=\"TransformBox2\">\r\n        <SliderBox\r\n        min={1}\r\n        max={30}\r\n        defaultValue={this.state.columns}\r\n        marks={{1: 1, 30: 30}}\r\n        step={1}\r\n        onChange={(value) => {this.setState({columns: value, rows: value});}}\r\n        />\r\n        {this.renderMode()}\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Grid;\r\n","import React, { Component } from 'react';\r\nimport shortid from 'shortid';\r\n\r\nconst CLASSNAME = 'Radar__Draggable'\r\nconst DRAGGINGCLASS = 'isDragging';\r\n\r\nclass DraggableCursor extends Component {\r\n\r\n  state = {isDragging: false};\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.ratio = 1;\r\n    this.onMouseMoveHandler = this.onMouseMove.bind(this);\r\n    this.onMouseUpHandler = this.onMouseUp.bind(this);\r\n    this.movement = 0;\r\n  }\r\n\r\n  onMouseDown(e) {\r\n    if(e.button !== 0) return;\r\n    window.addEventListener('mousemove', this.onMouseMoveHandler);\r\n    window.addEventListener('mouseup', this.onMouseUpHandler);\r\n    this.ratio = e.target.getBoundingClientRect().width / (this.props.r * 2);\r\n    this.onDragStart(e);\r\n  }\r\n\r\n  onMouseUp(e) {\r\n    if(e.button !== 0) return;\r\n    window.removeEventListener('mousemove', this.onMouseMoveHandler);\r\n    window.removeEventListener('mouseup', this.onMouseUpHandler);\r\n    this.onDragEnd(e);\r\n  }\r\n\r\n  onMouseMove(e) {\r\n    if(!this.state.isDragging) return;\r\n    this.onDrag(e);\r\n  }\r\n\r\n  onDragStart(e) {\r\n    this.setState({isDragging: true});\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  onDragEnd(e) {\r\n    this.setState({isDragging: false});\r\n    this.movement = 0;\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  onDrag(e) {\r\n    const {vector, step, radius, minRadius, maxRadius, callback} = this.props;\r\n\r\n    const scalar = e.movementX * vector.x  + e.movementY * vector.y;\r\n    this.movement -= scalar;\r\n    if(Math.abs(this.movement) >= step * this.ratio) {\r\n      const movement = Math.sign(this.movement) * Math.floor(Math.abs(this.movement) / (step * this.ratio));\r\n      const newRadius = radius + movement;\r\n      this.movement -= movement * step * this.ratio;\r\n      if(minRadius <= newRadius && newRadius <= maxRadius) {\r\n        callback(newRadius);\r\n      }\r\n    }\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  render() {\r\n\r\n    const {cx, cy, r} = this.props;\r\n    const className = CLASSNAME + (this.state.isDragging ? ' ' + DRAGGINGCLASS : '');\r\n\r\n    return <circle\r\n      cx={cx}\r\n      cy={cy}\r\n      r={r}\r\n      className={className}\r\n      onMouseDown={this.onMouseDown.bind(this)}\r\n    />;\r\n  }\r\n\r\n}\r\n\r\nexport default DraggableCursor;\r\n","import React, { Component } from 'react';\r\nimport shortid from 'shortid';\r\nimport DraggableCursor from './DraggableCursor';\r\nimport Paper from 'paper';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport next from '../../Icons/next.svg';\r\nimport unknown from '../../Icons/unknown.svg';\r\n\r\nconst WIDTH = 220;\r\nconst HEIGHT = 220;\r\nconst RADIUS = 100;\r\n\r\nconst getCirclePoint = (center = new Paper.Point(0, 0), r = 1, elNumber = 3, index = 0) => {\r\n  return new Paper.Point(center.x + r * Math.cos(index * 2 * Math.PI / elNumber - Math.PI / 2), center.y + r * Math.sin(index * 2 * Math.PI / elNumber - Math.PI / 2));\r\n}\r\n\r\nconst getCirclePoints = (center = new Paper.Point(0, 0), r = new Array(elNumber).fill(1), elNumber = 3) => {\r\n  let points = [];\r\n  for(let i = 0; i < elNumber; ++i) {\r\n    points.push( getCirclePoint(center, r[i], elNumber, i) );\r\n  }\r\n\r\n  return [...points];\r\n}\r\n\r\n\r\nclass Radar extends Component {\r\n\r\n  render() {\r\n\r\n    const probas = this.props.points.map((point) => (100 - point));\r\n    const callback = this.props.callback;\r\n\r\n\r\n    const elNumber = this.props.points.length;\r\n    const maxRadius = RADIUS;\r\n    const center = new Paper.Point(WIDTH / 2, HEIGHT / 2);\r\n    const points = getCirclePoints(center, probas, elNumber);\r\n    const pins = getCirclePoints(center, new Array(elNumber).fill(maxRadius), elNumber);\r\n    const outerPoints = getCirclePoints(center, new Array(elNumber).fill(maxRadius + 1), elNumber);\r\n    const d = points.reduce((acc, point, index) => `${acc} ${index > 0 ? 'L ' : ''}${point.x} ${point.y}`, 'M') + 'Z';\r\n    const outerD = outerPoints.reduce((acc, point, index) => `${acc} ${index > 0 ? 'L ' : ''}${point.x} ${point.y}`, 'M') + 'Z';\r\n    const lines = points.map((point, index) => (<line key={index} x1={center.x} y1={center.y} x2={point.x} y2={point.y} className='Radar__Line'/>));\r\n\r\n    const cursor = points.map((point, index) => {\r\n      const angle = index * 2 * Math.PI / elNumber - Math.PI / 2;\r\n      const radius = probas[index];\r\n      const x = center.x + radius * Math.cos(angle);\r\n      const y = center.y + radius * Math.sin(angle);\r\n      const vertex = new Paper.Point(center.x + maxRadius * Math.cos(angle), center.y + maxRadius * Math.sin(angle));\r\n      const vector = new Paper.Point(center.x - vertex.x, center.y - vertex.y).normalize();\r\n\r\n      return (\r\n        <DraggableCursor\r\n          cx={x}\r\n          cy={y}\r\n          r={6}\r\n          step={1}\r\n          vector={vector}\r\n          minRadius={0}\r\n          maxRadius={maxRadius}\r\n          radius={radius}\r\n          callback={(newRadius) => {\r\n              const newProba = (maxRadius - newRadius);\r\n              callback(newProba, index);\r\n          }}\r\n          key={index}\r\n        />\r\n      )\r\n    });\r\n\r\n    const landmarks = pins.map((point, index) => (\r\n      <circle key={index} cx={point.x} cy={point.y} r={2} className='Radar__Point' onClick={() => {\r\n        callback(0, index);\r\n      }}>\r\n        <title>0</title>\r\n      </circle>\r\n      /*<text x={point.x} y={point.y + 12} className='Radar__Text'>0</text>*/\r\n    ));\r\n\r\n    return (\r\n      <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" viewBox={`0 0 ${WIDTH} ${HEIGHT}`} className='Markov__Radar'>\r\n        <path d={outerD} className='Radar__Outline'/>\r\n        <path d={d} className='Radar__Shape'/>\r\n        {lines}\r\n        <circle cx={center.x} cy={center.y} r={2} className='Radar__Point Radar__Center'>\r\n          <title>100</title>\r\n        </circle>\r\n        <text x={center.x} y={center.y + 12} className='Radar__Text'>100</text>\r\n        {landmarks}\r\n        {cursor}\r\n      </svg>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default Radar;\r\n","import React from 'react';\r\nimport BoxGroup from '../BoxGroup/BoxGroup';\r\nimport 'rc-slider/assets/index.css';\r\nimport './Markov.css';\r\nimport markovIcon from '../../Icons/markov.svg';\r\nimport Radar from './Radar';\r\nimport shortid from 'shortid';\r\n\r\n//import Icons\r\nimport SVG from 'react-svg';\r\nimport next from '../../Icons/next.svg';\r\nimport unknown from '../../Icons/unknown.svg';\r\n\r\nconst CENT = 100;\r\nconst ROUND = 10;\r\n\r\nfunction clamp_left(a, b) {\r\n   return a < b ? b : a;\r\n}\r\n\r\nfunction clamp_right(a, b) {\r\n   return a > b ? b : a;\r\n}\r\n\r\nfunction clamp(a, b, c) {\r\n  return clamp_left(clamp_right(a, c), b);\r\n}\r\n\r\nfunction checkLeft(userValue, i, handle) {\r\n  if (i < 0) return;\r\n  if (userValue <= handle[i]) {\r\n    handle[i] = userValue;\r\n    checkLeft(userValue, --i, handle);\r\n  }\r\n}\r\n\r\nfunction checkRight(userValue, i, handle) {\r\n  if (i >= handle.length) return;\r\n  if (userValue >= handle[i]) {\r\n    handle[i] = userValue;\r\n    checkRight(userValue, ++i, handle);\r\n  }\r\n}\r\n\r\nconst className = \"Markov\";\r\nconst unauthorized = [\"Placement\"];\r\n\r\n/*Pencil*/\r\nclass Markov extends BoxGroup {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return markovIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Markov.className;\r\n    this.suppMenu = [];\r\n    this.currentState = parseInt(Math.random() * (this.state.children.length));\r\n    this.idElement = [];\r\n    this.hasInfo = true;\r\n  }\r\n\r\n  initState() {\r\n    super.initState();\r\n    this.state.proba = this.initProba();\r\n    this.state.index = 0;\r\n  }\r\n\r\n  initProba(length = this.state.children.length) {\r\n    if(length <= 1) return [[CENT]];\r\n    const defaultValue = Math.floor(CENT / ROUND / length) * ROUND;\r\n    let proba = new Array(length).fill(new Array(length).fill(defaultValue));\r\n    proba.forEach((_, index) => {\r\n      proba[index][length - 1] = 100 - defaultValue * (length - 1);\r\n    });\r\n    return proba;\r\n  }\r\n\r\n  doBeforeSetChildren(children) {\r\n    const result = super.doBeforeSetChildren(children);\r\n    if(children.length !== this.state.children.length) {\r\n      this.currentState = parseInt(Math.random() * (children.length));\r\n      const newProba = this.initProba(children.length);\r\n      return {...result, proba: newProba, index: 0};\r\n    }\r\n    return result;\r\n  }\r\n\r\n  draw(sk) {\r\n    let length = this.state.children.length;\r\n    if(length === 0) return;\r\n    let element = this.elements[this.currentState];\r\n    if(length === 1) {\r\n      if(element) element.draw(sk);\r\n      return;\r\n    }\r\n    let proba = 0;\r\n    let rand = parseInt(Math.random() * (CENT));\r\n    let i;\r\n\r\n    for(i = 0; i < length && rand >= proba; ++i) {\r\n      proba += this.state.proba[this.currentState][i];\r\n    }\r\n\r\n    if(this.elements[i - 1]) this.elements[i - 1].draw(sk);\r\n    this.currentState = i - 1;\r\n  }\r\n\r\n  getProbas(index) {\r\n    if(index < 0 || index >= this.state.children.length) {\r\n      return [];\r\n    }\r\n\r\n    return [...this.state.proba[index]];\r\n  }\r\n\r\n  checkProba(proba, probaIndex) {\r\n    const length = this.state.children.length;\r\n    const index = this.state.index;\r\n    let newProba = [...this.state.proba];\r\n    newProba[index] = Array.from(this.state.proba[index]);\r\n    newProba[index][probaIndex] = proba;\r\n    const sum = newProba[index].reduce((acc, p) => acc + p, 0);\r\n    let remaining = sum - 100;\r\n    let i = (probaIndex + 1) % length;\r\n    while(i !== probaIndex && Math.abs(remaining) > 0) {\r\n      const p = newProba[index][i];\r\n      let r = clamp(p - remaining, 0, 100);\r\n      newProba[index][i] = r;\r\n      remaining -= p - r;\r\n      i = (i + 1) % length;\r\n    }\r\n    this.setState({proba: newProba});\r\n    window.updateWorkspace();\r\n  }\r\n\r\n  getInfo() {\r\n    return(\r\n      <>\r\n        <p>A Markov chain is a stochastic model describing a sequence of possible events in which the probability of each event depends only on the state attained in the previous event.</p>\r\n        <p>For instance, a state <strong>A</strong> can have a probability <em>p</em> to reach a state <strong>B</strong> and a probability <em>(1 - p)</em> to reach itself</p>\r\n      </>\r\n    );\r\n  }\r\n\r\n  renderBox() {\r\n    let radar = null;\r\n    const index = this.state.index;\r\n    const length = this.state.children.length;\r\n    let header = null;\r\n    let info = null;\r\n    let inputs = [];\r\n\r\n    if(length > 1 && this.state.proba.length > 1) {\r\n\r\n        for(let i = 0; i < length; ++i) {\r\n          const angle = i * 2 * Math.PI / length - Math.PI / 2;\r\n          const x = 50 + 40 * Math.cos(angle);\r\n          const y = 50 + 40 * Math.sin(angle);\r\n          const iconSelected = (i === index) ? ' selected' : '';\r\n          inputs.push(<div className=\"Markov__InputContainer\" key={i} style={{left: x + '%', top: y + '%'}}>\r\n            <span className={\"Markov__InputIcon\" + iconSelected}>\r\n              {iconSelected && <SVG src={next} className=\"exponent\" />}\r\n              <SVG src={this.state.children[i].type.icon} onClick={() => {this.setState({index: i})}}/>\r\n            </span>\r\n            <input className=\"Markov__Input\"\r\n              min={0}\r\n              max={100}\r\n              type='number'\r\n              value={this.state.proba[index][i]}\r\n              onChange={(e) => {\r\n                const target = e.target;\r\n                const intValue = parseInt(target.value, 10);\r\n                const value = Number.isInteger(intValue) ? intValue : 0;\r\n                if(target.min > value || target.max < value) return;\r\n                this.checkProba(value, i);\r\n              }}\r\n            />\r\n          </div>);\r\n        }\r\n\r\n        radar = <Radar points={this.getProbas(index)} callback={this.checkProba.bind(this)} />;\r\n\r\n\r\n        header = <span className=\"Markov__RangeIcon\">\r\n          <SVG src={this.state.children[index].type.icon}/>\r\n          <SVG src={next}/>\r\n          <SVG src={unknown}/>\r\n        </span>;\r\n\r\n        info = <span className=\"Markov__Info\">sum = 100</span>;\r\n      } else {\r\n        info = <span>Not enough elements</span>;\r\n      }\r\n\r\n    return <div className=\"Markov__Parameters\">\r\n      {header}\r\n      {radar}\r\n      {inputs}\r\n      {info}\r\n    </div>;\r\n  }\r\n\r\n}\r\n\r\nexport default Markov;\r\n","import Box from '../Box/Box';\r\nimport './Void.css';\r\nimport voidIcon from '../../Icons/void.svg';\r\n\r\nconst className = \"Void\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Void extends Box {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return voidIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Void.className;\r\n    this.suppMenu = [];\r\n    this.canMinimize = false;\r\n  }\r\n\r\n  getColorMenu() {\r\n    return [];\r\n  }\r\n\r\n  getTransforms() {\r\n    return null;\r\n  }\r\n\r\n}\r\n\r\nexport default Void;\r\n","import Color from './Color';\r\n\r\nclass Red extends Color {\r\n\r\n  constructor() {\r\n    super(229, 38, 30, 255);\r\n  }\r\n\r\n}\r\n\r\nRed.className = \"Red\";\r\n\r\nexport default Red;\r\n","import Color from './Color';\r\n\r\nclass Orange extends Color {\r\n\r\n  constructor() {\r\n    super(235, 117, 50, 255);\r\n  }\r\n\r\n}\r\n\r\nOrange.className = \"Orange\";\r\n\r\nexport default Orange;\r\n","import Color from './Color';\r\n\r\nclass Yellow extends Color {\r\n\r\n  constructor() {\r\n    super(247, 208, 56, 255);\r\n  }\r\n\r\n}\r\n\r\nYellow.className = \"Yellow\";\r\n\r\nexport default Yellow;\r\n","import Color from './Color';\r\n\r\nclass Green extends Color {\r\n\r\n  constructor() {\r\n    super(163, 224, 71, 255);\r\n  }\r\n\r\n}\r\n\r\nGreen.className = \"Green\";\r\n\r\nexport default Green;\r\n","import Color from './Color';\r\n\r\nclass LightBlue extends Color {\r\n\r\n  constructor() {\r\n    super(52, 185, 230, 255);\r\n  }\r\n\r\n}\r\n\r\nLightBlue.className = \"LightBlue\";\r\n\r\nexport default LightBlue;\r\n","import Color from './Color';\r\n\r\nclass Blue extends Color {\r\n\r\n  constructor() {\r\n    super(67, 85, 219, 255);\r\n  }\r\n\r\n}\r\n\r\nBlue.className = \"Blue\";\r\n\r\nexport default Blue;\r\n","import React, { Component } from 'react';\r\nimport './Symbol.css';\r\nimport Figure from '../Figure';\r\n\r\nconst className = \"Symbol\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Symbol extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Symbol.className;\r\n  }\r\n}\r\n\r\n\r\nexport default Symbol;\r\n","import React, { Component } from 'react';\r\nimport './Arrow.css';\r\nimport Symbol from '../Symbol';\r\nimport arrow_right from '../../../../Icons/arrow_right.svg';\r\nimport Paper from 'paper';\r\n\r\nconst className = \"Arrow\";\r\nconst unauthorized = [];\r\n\r\n/*Pencil*/\r\nclass Arrow extends Symbol {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return arrow_right;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Arrow.className;\r\n    this.headLength = 0.20;\r\n    this.tailLength = 0.09;\r\n    this.headAngle = 35;\r\n    this.tailAngle = 110;\r\n  }\r\n\r\n  drawFigure(sk) {\r\n\r\n    const end = new Paper.Point(this.width, this.height / 2);\r\n    const start = new Paper.Point(0, this.height / 2);\r\n    const arrowVec = start.subtract(end);\r\n\r\n    // parameterize {headLength: 20, tailLength: 6, headAngle: 35, tailAngle: 110}\r\n    // construct the arrow\r\n    const arrowHead = arrowVec.normalize(this.headLength);\r\n    const arrowTail = arrowHead.normalize(this.tailLength);\r\n\r\n    const p3 = end;                  // arrow point\r\n\r\n    const p2 = end.add(arrowHead.rotate(-this.headAngle));   // leading arrow edge angle\r\n    const p4 = end.add(arrowHead.rotate(this.headAngle));    // ditto, other side\r\n\r\n    const p1 = p2.add(arrowTail.rotate(this.tailAngle));     // trailing arrow edge angle\r\n    const p5 = p4.add(arrowTail.rotate(-this.tailAngle));    // ditto\r\n\r\n    // specify all but the last segment, closed does that\r\n    let path = sk.path([start, p1, p2, p3, p4, p5]);\r\n    path.closed = true;\r\n    sk.setPathTransform(path);\r\n  }\r\n}\r\n\r\n\r\nexport default Arrow;\r\n","import Figure from '../Figure';\r\nimport './Character.css';\r\n\r\nconst className = \"Character\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Character extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return undefined;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Character.className;\r\n    this.text = 'noText';\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    let text = sk.text(this.text, 0.5, 0.85);\r\n    text.fontSize = this.height;\r\n    sk.setPathTransform(text);\r\n  }\r\n}\r\n\r\nexport default Character;\r\n","import Character from './Character';\r\nimport zero from '../../../Icons/zero.svg';\r\n\r\nconst className = \"Zero\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Number0 extends Character {\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return zero;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Number0.className;\r\n    this.text = '0'\r\n  }\r\n}\r\n\r\nexport default Number0;\r\n","import Character from './Character';\r\nimport one from '../../../Icons/one.svg';\r\n\r\nconst className = \"One\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass Number1 extends Character {\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return one;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Number1.className;\r\n    this.text = '1'\r\n  }\r\n}\r\n\r\nexport default Number1;\r\n","import React, {Component} from 'react';\r\nimport './Log.css';\r\n\r\nclass Log extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onClose = (this.props.onClose instanceof Function) ? this.props.onClose : (e) => {};\r\n        this.text = new String(this.props.children);\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className='Log' onClick={this.onClose}>\r\n                <span>{this.text.toString()}</span>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Log;","import React from 'react';\r\nimport BoxGroup from '../BoxGroup/BoxGroup';\r\nimport './Recursion.css';\r\nimport SVG from 'react-svg';\r\nimport recursion from '../../Icons/filter.svg';\r\nimport recursionOption from '../../Icons/filter_none.svg';\r\nimport Canvas from '../Canvas/Canvas';\r\nimport Log from '../Log/Log';\r\n\r\nconst className = \"Recursion\";\r\nconst unauthorized = [\"Placement\", \"Recursion\", \"Markov\", \"Void\"];\r\n\r\n/*Pencil*/\r\nclass Recursion extends BoxGroup {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    static get icon() {\r\n        return recursion;\r\n    }\r\n\r\n    static get unauthorized() {\r\n        return [...super.unauthorized, ...unauthorized];\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.className += \" \" + Recursion.className;\r\n        this.suppMenu = [];\r\n        this.hasInfo = true;\r\n        this.globalRecursion = 0;\r\n        Canvas.attach(this);\r\n    }\r\n\r\n    receiveNotification() {\r\n        this.globalRecursion = 0;\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        Canvas.detach(this);\r\n    }\r\n\r\n    filterUnauthorized(menu) {\r\n        if(this.constructor.unauthorized.indexOf('*') !== -1) {\r\n            return [];\r\n        }\r\n        const filteredMenu = menu.filter((item) => this.constructor.unauthorized.indexOf(item.type) === -1);\r\n        if(this.hasParent('Recursion') && (this.state.nbThisBox < 4 && this.state.ignoreThisBox || this.state.nbThisBox < 2)) {\r\n            return [...filteredMenu, {type: 'ThisBox'}];\r\n        }\r\n        return filteredMenu;\r\n    }\r\n\r\n    getColorMenu() {\r\n        return [];\r\n    }\r\n\r\n    initState() {\r\n        super.initState();\r\n        this.state.recursionMax = 2;\r\n        this.state.ignoreThisBox = true;\r\n        this.state.nbThisBox = 0;\r\n        this.state.log = false;\r\n    }\r\n\r\n    draw(sk) {\r\n        let el = this.elements;\r\n        for(let i = 0; i < el.length; ++i) {\r\n            let element = el[i];\r\n            if(this.state.ignoreThisBox && this.globalRecursion > this.state.recursionMax) {\r\n                continue;\r\n            }\r\n            sk.push();\r\n                this.drawBeforeChild(sk, element);\r\n                if(element) element.draw(sk);\r\n            sk.pop();\r\n        }\r\n    }\r\n\r\n    getInfo() {\r\n        return (\r\n            <>\r\n                <p>Recursion occurs when a thing is defined in terms of itself or of its type.</p>\r\n                <p>In other words, it's an object or a process that <strong>refers to itself</strong>.</p>\r\n                <p>It's a infinite loop and a limit condition is necessary.</p>\r\n            </>\r\n        );\r\n    }\r\n\r\n    doBeforeRender() {\r\n        this.reloadMenu(); //Force reload menu\r\n    }\r\n\r\n    getTransforms() {\r\n        return (\r\n            <>\r\n                <div className='Transform'>\r\n                    <SVG src={recursionOption} className='TransformBox__icon'/>\r\n                    <div className='Recursion__options'>\r\n                        <input type='number' min={1} max={4} value={this.state.recursionMax} onChange={(e) => {\r\n                            const value = parseInt(e.target.value, 10) || 0;\r\n                            if(e.target.min > value || e.target.max < value) return;\r\n                            this.setState({recursionMax: value});\r\n                            window.updateWorkspace();\r\n                        }}/>\r\n                    </div>\r\n                </div>\r\n                <div className='Transform'>\r\n                    <div className='Recursion__options'>\r\n                        <label className='Recursion__duplicate'>\r\n                            <input type='checkbox' checked={this.state.ignoreThisBox} onChange={(e) => {\r\n                                if(this.state.nbThisBox <= 2) {\r\n                                    this.setState({ignoreThisBox: !this.state.ignoreThisBox});\r\n                                } else {\r\n                                    this.setState({log: true});\r\n                                }\r\n                                window.updateWorkspace();\r\n                            }}/>\r\n                            <span className='checkmark'></span>\r\n                            <span>No Global Duplication</span>\r\n                        </label>\r\n                        {this.state.log && <Log onClose={(e) => this.setState({log: false})}>Please, remove some ThisBox</Log>}\r\n                    </div>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Recursion;\r\n","import Figure from '../Figure';\r\nimport Canvas from '../../Canvas/Canvas';\r\nimport './ThisBox.css';\r\nimport thisIcon from '../../../Icons/my_location.svg';\r\n\r\nconst className = \"ThisBox\";\r\nconst unauthorized = [\"*\"];\r\n\r\n/*Pencil*/\r\nclass ThisBox extends Figure {\r\n\r\n  static get className() {\r\n    return className;\r\n  }\r\n\r\n  static get icon() {\r\n    return thisIcon;\r\n  }\r\n\r\n  static get unauthorized() {\r\n    return [...super.unauthorized, ...unauthorized];\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + ThisBox.className;\r\n    this.suppMenu = [];\r\n    this.recursionParent = null;\r\n    this.recursion = 0;\r\n    Canvas.attach(this);\r\n  }\r\n\r\n  receiveNotification() {\r\n    this.recursion = 0;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getRecursionDraw();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    Canvas.detach(this);\r\n    this.recursionParent.setState({nbThisBox: this.recursionParent.state.nbThisBox - 1});\r\n  }\r\n\r\n\r\n  getColorMenu() {\r\n    return [];\r\n  }\r\n\r\n  getRecursionDraw() {\r\n    let parent = this.props.parent;\r\n    while(parent && parent.constructor.className !== 'Recursion') {\r\n        parent = parent.props.parent;    \r\n    }\r\n    if(!parent) {\r\n        this.onClose();\r\n    } else {\r\n        this.recursionParent = parent;\r\n        this.recursionParent.setState({nbThisBox: this.recursionParent.state.nbThisBox + 1});\r\n    }\r\n  }\r\n\r\n  onDragStart(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  drawFigure(sk) {\r\n    if(this.recursionParent && this.recursion <= this.recursionParent.state.recursionMax && this.recursionParent.globalRecursion <= this.recursionParent.state.recursionMax) {\r\n      ++this.recursionParent.globalRecursion;\r\n      ++this.recursion;\r\n      this.recursionParent.draw(sk);\r\n      --this.recursion;\r\n      --this.recursionParent.globalRecursion;\r\n    }\r\n  }\r\n\r\n  draw(sk) {\r\n    const scale = this.scale;\r\n    const {x, y} = this.position;\r\n    sk.push();\r\n      sk.rotate(this.rotation, x, y);\r\n      sk.scale(scale.x, scale.y, x, y);\r\n      sk.translate(x, y);\r\n      this.drawFigure(sk);\r\n    sk.pop();\r\n  }\r\n\r\n}\r\n\r\nexport default ThisBox;","import exactMath from 'exact-math';\r\n\r\nexport function fix(value, step) {\r\n    const netValue = exactMath.mul(exactMath.round(exactMath.div(parseFloat(value), step)), step);\r\n    return netValue;\r\n}","import React from 'react';\r\nimport Input from '../Input';\r\nimport exactMath from 'exact-math';\r\nimport * as Utils from '../../../Utils';\r\nimport SVG from 'react-svg';\r\nimport random from '../../../Icons/dice.svg';\r\nimport arrowLeft from '../../../Icons/arrow_leftUI.svg';\r\nimport arrowRight from '../../../Icons/arrow_rightUI.svg';\r\nimport './Random.css';\r\n\r\nconst className = \"Random\";\r\n\r\nclass Random extends Input {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.step = (this.props.step || 1);\r\n    }\r\n\r\n    getValue() {\r\n        return this.rand();\r\n    }\r\n\r\n    rand() {\r\n        const rand = Math.random() * (this.state.to - this.state.from + this.step) + this.state.from;\r\n        return this.fix(rand);\r\n    }\r\n\r\n    init() {\r\n        this.state.from = this.props.min;\r\n        this.state.to = this.props.max;\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n        this.state = state;\r\n    }\r\n\r\n    fix(value) {\r\n        return Utils.fix(value, this.step);\r\n    }\r\n\r\n    toJSON() {\r\n        return {...this.state};\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='Input Random'>\r\n                <input type='number' min={this.props.min} max={exactMath.sub(this.state.to, this.step)} step={this.step} value={this.state.from} onChange={(e) => {\r\n                    const value = parseFloat(e.target.value ? e.target.value : 0);\r\n                    if(e.target.min > value || e.target.max < value) return;\r\n                    this.setState({from: this.fix(value)});\r\n                    window.updateWorkspace();\r\n                }}/>\r\n                <SVG className='Random__arrow' src={arrowLeft}/>\r\n                <SVG className='Random__icon' src={random} />\r\n                <SVG className='Random__arrow' src={arrowRight}/>\r\n                <input type='number' min={exactMath.add(this.state.from, this.step)} max={this.props.max} step={this.step} value={this.state.to} onChange={(e) => {\r\n                    const value = parseFloat(e.target.value ? e.target.value : 0);\r\n                    if(e.target.min > value || e.target.max < value) return;\r\n                    this.setState({to: this.fix(value)});\r\n                    window.updateWorkspace();\r\n                }}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Random;\r\n","import React from 'react';\r\nimport Input from '../Input';\r\nimport Canvas from '../../Canvas/Canvas';\r\nimport exactMath from 'exact-math';\r\nimport * as Utils from '../../../Utils';\r\nimport SVG from 'react-svg';\r\nimport increment from '../../../Icons/increment.svg';\r\nimport decrement from '../../../Icons/decrement.svg';\r\nimport arrowLeft from '../../../Icons/arrow_leftUI.svg';\r\nimport arrowRight from '../../../Icons/arrow_rightUI.svg';\r\nimport looped from '../../../Icons/repeat.svg';\r\nimport loopedInverse from '../../../Icons/sync_alt.svg';\r\nimport limited from '../../../Icons/trending_flat.svg';\r\nimport './Increment.css';\r\n\r\nconst inputOptionsIcons = [\r\n    {\r\n        icon: limited,\r\n        id: 'limited',\r\n        title: 'Limited'\r\n    },\r\n    {\r\n        icon: looped,\r\n        id: 'looped',\r\n        title: 'Looped'\r\n    },\r\n    {\r\n        icon: loopedInverse,\r\n        id: 'loopedInverse',\r\n        title: 'Looped Inverse'\r\n    }\r\n];\r\n\r\nconst className = \"Increment\";\r\n\r\nclass Increment extends Input {\r\n\r\n    static get className() {\r\n        return className;\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.increment = this.state.increment;\r\n        this.step = props.step || 1;\r\n        this.value = this.state.from;\r\n        this.target = null;\r\n        Canvas.attach(this);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        Canvas.detach(this);\r\n    }\r\n\r\n    init() {\r\n        this.state.from = this.props.min;\r\n        this.state.to = this.props.max;\r\n        this.state.condition = 0;\r\n        this.state.increment = 1;\r\n        this.state.step = this.props.step || 1;\r\n    }\r\n\r\n    initFromSavedState(state) {\r\n        this.state = state;   \r\n    }\r\n\r\n    receiveNotification() {\r\n        if(this.state.decrement === -1) {\r\n            this.value = this.state.to;\r\n        } else {\r\n            this.value = this.state.from;\r\n        }\r\n\r\n        this.increment = this.state.increment;\r\n    }\r\n\r\n    getValue() {\r\n        const actualValue = this.value;\r\n        const value = exactMath.add(this.value, exactMath.mul(this.increment, this.state.step));\r\n        this.value = this.condition(value);\r\n        return actualValue;\r\n    }\r\n\r\n    condition(value) {\r\n        switch(this.state.condition) {\r\n            case(1):\r\n                return this.looped(value);\r\n            case(2):\r\n                return this.loopedInverse(value);\r\n            default:\r\n                return this.limited(value);\r\n        }\r\n    }\r\n\r\n    fix(value) {\r\n        return Utils.fix(value, this.step);\r\n    }\r\n\r\n    limited(value) {\r\n        if(this.state.increment === 1) {\r\n            return (value >= this.state.to) ? this.state.to : value;\r\n        } else {\r\n            return (value <= this.state.from) ? this.state.from : value;\r\n        }\r\n    }\r\n\r\n    looped(value) {\r\n        if(this.state.increment === 1) {\r\n            return (value > this.state.to) ? exactMath.sub(value, this.state.to) : value;\r\n        } else {\r\n            return (value < this.state.from) ? exactMath.add(value, this.state.to) : value;\r\n        }\r\n    }\r\n\r\n    loopedInverse(value) {\r\n        if(value > this.state.to || value < this.state.from) {\r\n            this.increment = -this.increment;\r\n            if(value > this.state.to) {\r\n                return exactMath.add(this.state.to, exactMath.mul(this.increment, this.state.step));\r\n            } else {\r\n                return exactMath.add(this.state.from, exactMath.mul(this.increment, this.state.step));\r\n            }\r\n            \r\n        }\r\n        return value;\r\n    }\r\n\r\n    onChangeOption(e) {\r\n        this.setState({condition: parseInt(e.target.value, 10)});\r\n        window.updateWorkspace();\r\n    }\r\n\r\n    toJSON() {\r\n        return {...this.state};\r\n    }\r\n\r\n    render() {\r\n\r\n        const incrementIcon = (this.state.increment === 1) ? increment : decrement;\r\n        const InputOptions = inputOptionsIcons.map(({icon, id, title}, index) => {\r\n            const selected = (this.state.condition === index) ? 'selected' : ''; \r\n            return (\r\n                <label key={id} title={title} className={selected}>\r\n                    <input\r\n                        checked={this.state.condition === index}\r\n                        type='radio'\r\n                        name='condition'\r\n                        value={index}\r\n                        onChange={this.onChangeOption.bind(this)}\r\n                    />\r\n                    <SVG className={'Increment__icon'} src={icon}/>\r\n                </label>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className='Input Increment'>\r\n                <div className='Increment__limits'>\r\n                    <input type='number' min={this.props.min} max={exactMath.sub(this.state.to, this.step)} step={this.step} value={this.state.from} onChange={(e) => {\r\n                        const value = parseFloat(e.target.value ? e.target.value : 0);\r\n                        if(e.target.min > value || e.target.max < value) return;\r\n                        this.setState({from: this.fix(value)});\r\n                        window.updateWorkspace();\r\n                    }}/>\r\n\r\n                    <SVG className='Random__arrow' src={arrowLeft} style={(this.state.increment === 1) ? ({visibility: 'hidden'}) : {}}/>\r\n                    \r\n                    <div className='Increment__step'>\r\n                        <input title='step' type='number' min={this.step} max={exactMath.sub(this.state.to, this.state.from)} step={this.step} value={this.state.step} onChange={(e) => {\r\n                            const value = parseFloat(e.target.value ? e.target.value : 0);\r\n                            if(e.target.min > value || e.target.max < value) return;\r\n                            this.setState({step: this.fix(value)});\r\n                            window.updateWorkspace();\r\n                        }}/>\r\n                        <SVG className='Increment__icon' src={incrementIcon} onClick={(e) => {\r\n                            this.setState({increment : -this.state.increment});\r\n                            window.updateWorkspace();\r\n                        }}/>\r\n                    </div>\r\n                    <SVG className='Random__arrow' src={arrowRight} style={(this.state.increment === -1) ? ({visibility: 'hidden'}) : {}}/>\r\n\r\n                    <input type='number' min={exactMath.add(this.state.from, this.step)} max={this.props.max} step={this.step} value={this.state.to} onChange={(e) => {\r\n                        const value = parseFloat(e.target.value ? e.target.value : 0);\r\n                        if(e.target.min > value || e.target.max < value) return;\r\n                        this.setState({to: this.fix(value)});\r\n                        window.updateWorkspace();\r\n                    }}/>\r\n                </div>\r\n                <div className='Increment__options'>\r\n                    {InputOptions}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Increment;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass LinearY extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + LinearY.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    for(var i = 0; i < columns; i++) {\r\n      sk.push();\r\n        sk.translate(column * i, 0);\r\n    \t\tfor(var j = 0; j < rows; j++) {\r\n          sk.push();\r\n            sk.translate(0, j * row);\r\n            if(callback) callback();\r\n          sk.pop();\r\n    \t\t}\r\n      sk.pop();\r\n  \t}\r\n  }\r\n\r\n}\r\n\r\nLinearY.className = \"LinearY\";\r\n\r\nexport default LinearY;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass DiagonalLeft extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + DiagonalLeft.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    for (let compteur = 0; compteur < columns; compteur++){\r\n      let i = columns - 1;\r\n      let j = compteur;\r\n      while(j >= 0){\r\n        sk.push();\r\n          sk.translate(column * i, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        i-=1;\r\n        j-=1;\r\n      }\r\n    }\r\n\r\n    for (let compteur = columns-1; compteur > 0; compteur--){\r\n      let i = compteur - 1;\r\n      let j = rows - 1;\r\n      while (i >= 0) {\r\n        sk.push();\r\n          sk.translate(column * i, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        i-=1;\r\n        j-=1;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nDiagonalLeft.className = \"DiagonalLeft\";\r\n\r\nexport default DiagonalLeft;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass DiagonalRight extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + DiagonalRight.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    for (var compteur = 0; compteur < columns; compteur++){\r\n      for (var i = 0; i <= compteur; i++) {\r\n        sk.push();\r\n          sk.translate(column * i, (compteur-i) * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n    }\r\n\r\n    for (var compteur = columns - 1; compteur > 0; compteur--){\r\n      var i = columns-compteur;\r\n      var j = rows - 1;\r\n      while (i < columns) {\r\n        sk.push();\r\n          sk.translate(column * i, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        i+=1;\r\n        j-=1;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nDiagonalRight.className = \"DiagonalRight\";\r\n\r\nexport default DiagonalRight;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass Orthogonal extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + Orthogonal.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    // suppose that rows === columns\r\n    for (var compteur = 0; compteur < columns; compteur++) {\r\n      let i, j;\r\n      for (i = 0; i <= compteur; i++){\r\n        sk.push();\r\n          sk.translate(i * column, compteur * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n      for (j = compteur - 1; j >= 0; j--){\r\n        sk.push();\r\n          sk.translate(column * compteur, j * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nOrthogonal.className = \"Orthogonal\";\r\n\r\nexport default Orthogonal;\r\n","import GridMode from '../GridMode';\r\n\r\n\r\n/*Pencil*/\r\nclass SnailRight extends GridMode {\r\n\r\n  state = {\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.className += \" \" + SnailRight.className;\r\n  }\r\n\r\n  mode(sk, data) {\r\n    const {rows, columns, callback} = data;\r\n\r\n    var column = sk.width/columns;\r\n    var row = sk.height/rows;\r\n\r\n    let a = Math.round(columns / 2) - 1;\r\n    let b = Math.round(rows / 2) - 1;\r\n    let side = 1;\r\n    let move = -1;\r\n\r\n    while (side <= columns) {\r\n      move *= -1;\r\n      for (let i = 0; i<side && a >= 0 && a < columns; i++) {\r\n        sk.push();\r\n          sk.translate(a * column, b * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        a += move;\r\n      }\r\n      if(a < 0 || a >= columns) break;\r\n\r\n      for (let i = 0; i<side && b >= 0 && b < rows; i++) {\r\n        console.log(a, b);\r\n        sk.push();\r\n          sk.translate(a * column, b * row);\r\n          if(callback) callback();\r\n        sk.pop();\r\n        b += move;\r\n      }\r\n      side++;\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nSnailRight.className = \"SnailRight\";\r\n\r\n\r\nexport default SnailRight;\r\n","import Figure from './Figures/Figure';\r\nimport Rectangle from './Figures/Rectangle/Rectangle';\r\nimport Triangle from './Figures/Triangle/Triangle';\r\nimport Ellipse from './Figures/Ellipse/Ellipse';\r\nimport HHatching from './Figures/Hatching/HHatching/HHatching';\r\nimport VHatching from './Figures/Hatching/VHatching/VHatching';\r\nimport LOHatching from './Figures/Hatching/LOHatching/LOHatching';\r\nimport ROHatching from './Figures/Hatching/ROHatching/ROHatching';\r\nimport Placement from './Placement/Placement';\r\nimport Grid from './Placement/Grid/Grid';\r\nimport Markov from './Markov/Markov';\r\nimport Transform from './Transforms/Transform';\r\nimport Color from './Colors/Color';\r\nimport Void from './Void/Void';\r\nimport Red from './Colors/Red';\r\nimport Orange from './Colors/Orange';\r\nimport Yellow from './Colors/Yellow';\r\nimport Green from './Colors/Green';\r\nimport LightBlue from './Colors/LightBlue';\r\nimport Blue from './Colors/Blue';\r\nimport Black from './Colors/Black';\r\nimport White from './Colors/White';\r\nimport Series from './Series/Series';\r\nimport Symbol from './Figures/Symbols/Symbol';\r\nimport Arrow from './Figures/Symbols/Arrow/Arrow';\r\nimport Character from './Figures/Characters/Character';\r\nimport Number0 from './Figures/Characters/Number0';\r\nimport Number1 from './Figures/Characters/Number1';\r\nimport Recursion from './Recursion/Recursion';\r\nimport ThisBox from './Figures/ThisBox/ThisBox';\r\nimport Random from './Input/Random/Random';\r\nimport Increment from './Input/Increment/Increment';\r\nimport SliderBox from './Input/SliderBox/SliderBox';\r\n\r\n\r\n//GridModes\r\nimport LinearY from './Modes/GridMode/LinearY/LinearY';\r\nimport LinearX from './Modes/GridMode/LinearX/LinearX';\r\nimport DiagonalLeft from './Modes/GridMode/DiagonalLeft/DiagonalLeft';\r\nimport DiagonalRight from './Modes/GridMode/DiagonalRight/DiagonalRight';\r\nimport Orthogonal from './Modes/GridMode/Orthogonal/Orthogonal';\r\nimport SnailRight from './Modes/GridMode/SnailRight/SnailRight';\r\n\r\nexport function getClassFromName(name) {\r\n  const lname = name.toLowerCase();\r\n  switch(lname) {\r\n    case('figure'):\r\n      return Figure;\r\n    case('rectangle'):\r\n      return Rectangle;\r\n    case('triangle'):\r\n      return Triangle;\r\n    case('ellipse'):\r\n      return Ellipse;\r\n    case('hhatching'):\r\n      return HHatching;\r\n    case('vhatching'):\r\n      return VHatching;\r\n    case('lohatching'):\r\n      return LOHatching;\r\n    case('rohatching'):\r\n      return ROHatching;\r\n    case('placement'):\r\n      return Placement;\r\n    case('grid'):\r\n      return Grid;\r\n    case('markov'):\r\n      return Markov;\r\n    case('transform'):\r\n      return Transform;\r\n    case('color'):\r\n      return Color;\r\n    case('red'):\r\n      return Red;\r\n    case('orange'):\r\n      return Orange;\r\n    case('yellow'):\r\n      return Yellow;\r\n    case('green'):\r\n      return Green;\r\n    case('lightblue'):\r\n      return LightBlue;\r\n    case('blue'):\r\n      return Blue;\r\n    case('black'):\r\n      return Black;\r\n    case('white'):\r\n      return White;\r\n    case('void'):\r\n      return Void;\r\n    case('linearx'):\r\n      return LinearX;\r\n    case('lineary'):\r\n      return LinearY;\r\n    case('diagonalleft'):\r\n      return DiagonalLeft;\r\n    case('diagonalright'):\r\n      return DiagonalRight;\r\n    case('orthogonal'):\r\n      return Orthogonal;\r\n    case('snailright'):\r\n      return SnailRight;\r\n    case('series'):\r\n      return Series;\r\n    case('arrow'):\r\n      return Arrow;\r\n    case('symbol'):\r\n      return Symbol;\r\n    case('character'):\r\n      return Character;\r\n    case('zero'):\r\n      return Number0;\r\n    case('one'):\r\n      return Number1\r\n    case('sliderbox'):\r\n      return SliderBox;\r\n    case('increment'):\r\n      return Increment;\r\n    case('random'):\r\n      return Random;\r\n    case('recursion'):\r\n      return Recursion;\r\n    case('thisbox'):\r\n      return ThisBox;\r\n    default:\r\n      //console.warn(lname);\r\n      return null;\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport '../../Assets/font/SpaceGrotesk.css';\r\nimport './App.css';\r\n//import Icons\r\nimport SVG from 'react-svg'\r\nimport icon_info from '../../Icons/info.svg';\r\n// import Components\r\nimport Workspace from '../../Components/Workspace/Workspace';\r\nimport Save from '../../Components/Save/Save';\r\nimport Canvas from '../../Components/Canvas/Canvas';\r\n// import Boxes\r\nimport {getClassFromName} from '../../Components/Index';\r\n\r\nwindow.getClassFromName = getClassFromName;\r\n\r\nwindow.updateWorkspace = Workspace.forceUpdate;\r\n\r\nwindow.addClassToElement = function(name, target) {\r\n  let cl = getClassFromName(name);\r\n  target.addChild(cl);\r\n  if(!(target instanceof Workspace)) {\r\n    Workspace.forceUpdate();\r\n  }\r\n};\r\n\r\nwindow.getIconClassFromName = function(name) {\r\n  let cl = getClassFromName(name);\r\n  if(cl) {\r\n    return cl.icon;\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\nwindow.isAuthorized = function(type, unauthorized) {\r\n  let r = true;\r\n  if(!type) return false;\r\n\r\n  if(unauthorized instanceof Array) {\r\n    let obj;\r\n    if(typeof type === 'string') {\r\n      let cl = getClassFromName(type);\r\n      obj = new cl();\r\n    } else {\r\n      obj = new type();\r\n    }\r\n\r\n    for(let i = 0; i < unauthorized.length && r; ++i) {\r\n      let unauthorizedClass = getClassFromName(unauthorized[i]);\r\n      if(unauthorizedClass === null) {\r\n        console.error(unauthorized[i] + ' : Invalid unauthorized Class');\r\n        continue;\r\n      }\r\n      r = r && !(obj instanceof unauthorizedClass);\r\n    }\r\n  } else {\r\n    return false;\r\n  }\r\n\r\n  return r;\r\n}\r\n\r\nlet toggle = false;\r\n\r\nclass App extends Component {\r\n\r\n  constructor(props){\r\n    super(props);\r\n    this.aboutClick = this.aboutClick.bind(this);\r\n    this.handleOutsideClick = this.handleOutsideClick.bind(this);\r\n  }\r\n\r\n  handleOutsideClick(e) {\r\n    // ignore clicks on the component itself\r\n    if (this.aboutContainer.contains(e.target)) {\r\n      return\r\n    }\r\n    if (this.aboutButton.contains(e.target)) {\r\n      this.aboutClick()\r\n      return\r\n    }\r\n    toggle = false\r\n    this.aboutContainer.style.display = 'none'\r\n  }\r\n\r\n  aboutClick() {\r\n    if(!toggle) {\r\n      toggle = !toggle\r\n      this.aboutContainer.style.display = 'flex'\r\n    } else {\r\n      toggle = !toggle\r\n      this.aboutContainer.style.display = 'none'\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='App' onClick={(e) => this.handleOutsideClick(e)}>\r\n        <header className='App-header border-bottom'>\r\n          <h1 className='App-logo'>Paperwork&nbsp;<sup className='textExponent'>2020</sup></h1>\r\n          <div className='App-links'>\r\n          <a className='App-link' href='http://mobitool.free.fr/edu/ma-ex1.html' target='_blank' rel='noopener noreferrer'>Markov Example #1</a>\r\n          <a className='App-link' href='http://mobitool.free.fr/edu/ma-ex2.html' target='_blank' rel='noopener noreferrer'>Markov Example #2</a>\r\n          </div>\r\n          <div className='about' ref={aboutButton => { this.aboutButton = aboutButton; }}>\r\n            <SVG src={icon_info}/>\r\n          </div>\r\n        </header>\r\n        <main>\r\n          <div className='leftSide'>\r\n              <div className='aboutContainer' ref={aboutContainer => { this.aboutContainer = aboutContainer; }}>\r\n                <h2 className='aboutTitle'>Paperwork <sup className='textExponent'>2020</sup></h2>\r\n                <a className='aboutLink' href='http://mobitool.free.fr/paper/ea' target='_blank' rel='noopener noreferrer'>State of the arts online</a>\r\n                <p>Paperwork is an online software for research in art and in the field of computer and visual research. It is developed in the perspective of computer art practice in the context of art schools, colleges, high schools and so on. The application helps producing drawings in the philosophy of generative processes. It is concerned with patterns, polygons, repertories and grammars. Moreover, the interface enables the learning and the editing of algorithms and therefore the construction of simple computational processes. It also offers to export svg format that makes it compatible with the traditional vector work area (graphic design, pen plotter, laser cutting, ...).</p>\r\n                <p>Paperworks main algorithm is based on Markov chain, an algorithm that was used by artists such as Frieder Nake (Germany), Hiroshi Kawano (Japan), Herv Huitric and Monique Nahas (France) in early Computer Art. It is now heavily used in our digital environment (google page ranking, chatbots, physical phenomenon modeling, ...). It is also classified in the machine learning area of the computational field.</p>\r\n                <p>The Paperwork web application is based on the previous software experiment Generic Images (2018). Paperworks project is developed thanks to IMAC-ESIPE training program in the University Gustave Eiffel.</p>\r\n                <div className='aboutCredits'>\r\n                <p>Software design team:</p>\r\n                <p>Gatan Robillard with Nicolas Cusumano, Ccile Rousset, Vincent Schmid, Quentin Sedmi.</p>\r\n                </div>\r\n              </div>\r\n              <Workspace/>\r\n          </div>\r\n            <div className='rightSide border-left'>\r\n              <div className='editionMenu border-bottom'>\r\n                <Save/>\r\n              </div>\r\n                <Canvas/>\r\n            </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './Containers/App/App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { configure } from 'enzyme';\r\nimport Adapter from 'enzyme-adapter-react-16';\r\n\r\nconfigure({ adapter: new Adapter() });\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}